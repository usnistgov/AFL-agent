
<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Building Pipelines &#8212; AFL-agent  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/ntd2d.css?v=525a25f0" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'tutorials/building_pipelines';</script>
    <link rel="icon" href="../_static/logo_light.svg"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Interactive Tutorials" href="interactive.html" />
    <link rel="prev" title="Quickstart" href="quickstart.html" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />

  <link rel="stylesheet" href="https://pages.nist.gov/nist-header-footer/css/nist-combined.css">
  <script src="https://code.jquery.com/jquery-3.6.2.min.js" type="text/javascript" defer="defer"></script>
  <script src="https://pages.nist.gov/nist-header-footer/js/nist-header-footer.js" type="text/javascript" defer="defer"></script>


  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo_text_large_light.svg" class="logo__image only-light" alt="AFL-agent  documentation - Home"/>
    <img src="../_static/logo_text_large_dark.svg" class="logo__image only-dark pst-js-only" alt="AFL-agent  documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="installation.html">
    Setup
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../how-to/index.html">
    How-To Guides
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../explanations/index.html">
    Explanations
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../reference/index.html">
    Reference
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/usnistgov/afl-agent" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="installation.html">
    Setup
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../how-to/index.html">
    How-To Guides
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../explanations/index.html">
    Explanations
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../reference/index.html">
    Reference
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/usnistgov/afl-agent" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Building Pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive.html">Interactive Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_datasets.html">Using Example Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_prefab.html">Using Prefabricated Pipelines</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Tutorials</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Building Pipelines</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <p><a class="reference external" href="https://colab.research.google.com/github/usnistgov/AFL-agent/blob/main/docs/source/tutorials/building_pipelines.ipynb"><img alt="Open In Colab" src="https://colab.research.google.com/assets/colab-badge.svg" /></a></p>
<section id="Building-Pipelines">
<h1>Building Pipelines<a class="headerlink" href="#Building-Pipelines" title="Permalink to this heading">#</a></h1>
<p>Here we’ll go into more detail on the Quick Start Example from <a class="reference external" href="getting_started.rst">Getting Started</a>. In this example, we’ll build a pipeline that</p>
<ul class="simple">
<li><p>standardized the input compositions to improve the convergence of the Gaussian Process optimization</p></li>
<li><p>uses a Savitzky-Golay filter to compute the first derivative of the measurement</p></li>
<li><p>computes the similarity between the derivatives of the measurement data</p></li>
<li><p>clusters (i.e., labels) the data using spectral clustering</p></li>
<li><p>fits a Gaussian Process classifier to the data.</p></li>
<li><p>chooses the next optimal measurement based on the entropy of the Gaussian Process posterior</p></li>
</ul>
<section id="Setup">
<h2>Setup<a class="headerlink" href="#Setup" title="Permalink to this heading">#</a></h2>
<p>Only uncomment and run the next cell if you are running this notebook in Google Colab or if don’t already have the AFL-agent package installed.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># !pip install git+https://github.com/usnistgov/AFL-agent.git</span>
</pre></div>
</div>
</div>
<p>Below are the imported modules used in this tutorial</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">xarray</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">xr</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">AFL.double_agent</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">AFL.double_agent.plotting</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</div>
</section>
<section id="Load-Input-Data">
<h2>Load Input Data<a class="headerlink" href="#Load-Input-Data" title="Permalink to this heading">#</a></h2>
<p>Okay, to begin, we’ll load in a pre-prepared <code class="docutils literal notranslate"><span class="pre">xarray.Dataset</span></code>. These are powerful and flexible data structures for working with multi-dimensional data, and <code class="docutils literal notranslate"><span class="pre">AFL.double_agent</span></code> uses them for all input, intermediate and output data.</p>
<p>The dataset below contains simulated measurement data along with the compositions that this simulated data was generated at. It also has the ground truth phase labelse along with a grid of compositions that the agent will search through for the next optimal measurement.</p>
<p>To see how this dataset is created, see <a class="reference external" href="../how-to/building_xarray_datasets%3E">Building xarray.Datasets</a> page.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">load_dataset</span><span class="p">(</span><span class="s1">&#39;../data/example_dataset.nc&#39;</span><span class="p">)</span>
<span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1f1f1f;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
  height: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "►";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "▼";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 164kB
Dimensions:              (sample: 100, component: 2, x: 150, grid: 2500)
Coordinates:
  * component            (component) &lt;U1 8B &#x27;A&#x27; &#x27;B&#x27;
  * x                    (x) float64 1kB 0.001 0.001047 0.001097 ... 0.9547 1.0
Dimensions without coordinates: sample, grid
Data variables:
    composition          (sample, component) float64 2kB 5.7 1.36 ... 5.104
    ground_truth_labels  (sample) int64 800B 1 1 0 1 0 1 1 1 ... 1 1 1 1 1 0 1 1
    measurement          (sample, x) float64 120kB 1.915e+06 1.479e+06 ... 1.885
    composition_grid     (grid, component) float64 40kB 0.0 0.0 ... 10.0 25.0</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-78d5285c-58e8-4e9b-abae-46a0452d84bb' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-78d5285c-58e8-4e9b-abae-46a0452d84bb' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span>sample</span>: 100</li><li><span class='xr-has-index'>component</span>: 2</li><li><span class='xr-has-index'>x</span>: 150</li><li><span>grid</span>: 2500</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-c2502a89-5c90-47d0-8542-12f9714477bc' class='xr-section-summary-in' type='checkbox'  checked><label for='section-c2502a89-5c90-47d0-8542-12f9714477bc' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>component</span></div><div class='xr-var-dims'>(component)</div><div class='xr-var-dtype'>&lt;U1</div><div class='xr-var-preview xr-preview'>&#x27;A&#x27; &#x27;B&#x27;</div><input id='attrs-61c061f2-9573-4e9c-a122-5fb0ca8f0775' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-61c061f2-9573-4e9c-a122-5fb0ca8f0775' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a8075d38-31e3-4579-9eb6-baec2bcffc83' class='xr-var-data-in' type='checkbox'><label for='data-a8075d38-31e3-4579-9eb6-baec2bcffc83' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;A&#x27;, &#x27;B&#x27;], dtype=&#x27;&lt;U1&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.001 0.001047 ... 0.9547 1.0</div><input id='attrs-db3aecfa-bef1-4eec-a1ed-eee6dabaf0a6' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-db3aecfa-bef1-4eec-a1ed-eee6dabaf0a6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ed06d748-bbb2-42cb-9a7f-08afdac714f2' class='xr-var-data-in' type='checkbox'><label for='data-ed06d748-bbb2-42cb-9a7f-08afdac714f2' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0.001   , 0.001047, 0.001097, 0.001149, 0.001204, 0.001261, 0.001321,
       0.001383, 0.001449, 0.001518, 0.00159 , 0.001665, 0.001744, 0.001827,
       0.001914, 0.002005, 0.0021  , 0.002199, 0.002304, 0.002413, 0.002527,
       0.002647, 0.002773, 0.002905, 0.003042, 0.003187, 0.003338, 0.003496,
       0.003662, 0.003836, 0.004018, 0.004209, 0.004409, 0.004618, 0.004837,
       0.005066, 0.005307, 0.005559, 0.005822, 0.006099, 0.006388, 0.006691,
       0.007009, 0.007341, 0.00769 , 0.008055, 0.008437, 0.008837, 0.009256,
       0.009696, 0.010156, 0.010638, 0.011142, 0.011671, 0.012225, 0.012805,
       0.013413, 0.014049, 0.014716, 0.015414, 0.016146, 0.016912, 0.017714,
       0.018555, 0.019435, 0.020358, 0.021324, 0.022335, 0.023395, 0.024505,
       0.025668, 0.026886, 0.028162, 0.029498, 0.030898, 0.032364, 0.0339  ,
       0.035509, 0.037194, 0.038959, 0.040807, 0.042744, 0.044772, 0.046897,
       0.049122, 0.051453, 0.053894, 0.056452, 0.059131, 0.061936, 0.064875,
       0.067954, 0.071179, 0.074556, 0.078094, 0.0818  , 0.085681, 0.089747,
       0.094006, 0.098467, 0.103139, 0.108033, 0.11316 , 0.118529, 0.124154,
       0.130045, 0.136216, 0.14268 , 0.14945 , 0.156542, 0.16397 , 0.171751,
       0.179901, 0.188438, 0.197379, 0.206746, 0.216556, 0.226832, 0.237596,
       0.24887 , 0.26068 , 0.27305 , 0.286006, 0.299578, 0.313794, 0.328684,
       0.344281, 0.360618, 0.37773 , 0.395654, 0.414429, 0.434094, 0.454693,
       0.476269, 0.498869, 0.522542, 0.547337, 0.57331 , 0.600514, 0.62901 ,
       0.658858, 0.690122, 0.72287 , 0.757172, 0.793102, 0.830736, 0.870156,
       0.911447, 0.954697, 1.      ])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-85c3f0cd-6baa-4bd8-bdca-ab07cd2406c0' class='xr-section-summary-in' type='checkbox'  checked><label for='section-85c3f0cd-6baa-4bd8-bdca-ab07cd2406c0' class='xr-section-summary' >Data variables: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>composition</span></div><div class='xr-var-dims'>(sample, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>5.7 1.36 8.938 ... 0.478 5.104</div><input id='attrs-25d38e8c-629d-4f17-b8a3-aac7ecf37780' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-25d38e8c-629d-4f17-b8a3-aac7ecf37780' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d72b9814-aa47-4483-825f-d85b982f021f' class='xr-var-data-in' type='checkbox'><label for='data-d72b9814-aa47-4483-825f-d85b982f021f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[ 5.69995762,  1.36017531],
       [ 8.93782024, 16.17384162],
       [ 3.77901101, 19.69531938],
       [ 9.82535598,  7.16351158],
       [ 1.60370118, 23.73217969],
       [ 7.90994751, 14.71385158],
       [ 2.17465804,  4.75450299],
       [ 9.30875652,  2.86311327],
       [ 2.78926787,  0.04909185],
       [ 5.0368155 , 17.80655234],
       [ 1.18529693, 16.40857492],
       [ 1.65214034, 19.7760677 ],
       [ 2.73176727,  0.18850408],
       [ 9.22314222,  7.21778243],
       [ 8.33560023,  5.22074632],
       [ 8.10711809, 22.36120136],
       [ 4.10263293,  6.17733076],
       [ 7.94096049, 10.98300725],
       [ 6.58238609, 15.27804755],
       [ 3.78026574, 20.5150357 ],
...
       [ 5.0825235 ,  5.36441059],
       [ 8.50770583,  2.52786027],
       [ 4.46324027,  6.75171924],
       [ 8.52523439,  6.71058719],
       [ 9.23218578, 20.72269505],
       [ 6.7555881 , 10.24855529],
       [ 7.67539066,  1.6795503 ],
       [ 5.8397554 , 10.64947346],
       [ 0.22478436, 18.35236821],
       [ 8.83077635, 10.65541542],
       [ 8.98441453,  0.03322162],
       [ 0.11755953, 11.77699299],
       [ 7.90192605, 18.94690136],
       [ 7.42679234, 23.72441631],
       [ 8.7338296 , 12.27428886],
       [ 2.2094947 ,  9.43848935],
       [ 8.92898549, 10.34927984],
       [ 0.79890552, 16.37383273],
       [ 2.50284147,  0.0800645 ],
       [ 0.47797863,  5.10399908]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ground_truth_labels</span></div><div class='xr-var-dims'>(sample)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1 1 0 1 0 1 1 1 ... 1 1 1 1 1 0 1 1</div><input id='attrs-dd2bfe27-4c2c-49a3-9edc-d36cc4356cd3' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-dd2bfe27-4c2c-49a3-9edc-d36cc4356cd3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-38575814-7ff9-48ad-9643-8c7b6f60a009' class='xr-var-data-in' type='checkbox'><label for='data-38575814-7ff9-48ad-9643-8c7b6f60a009' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1,
       1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
       1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1,
       1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
       0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>measurement</span></div><div class='xr-var-dims'>(sample, x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.915e+06 1.479e+06 ... 1.766 1.885</div><input id='attrs-fd4691c5-1142-451d-a0ec-49d559343ae1' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-fd4691c5-1142-451d-a0ec-49d559343ae1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-644c5cd1-3eec-42dd-a98a-092cb24332c9' class='xr-var-data-in' type='checkbox'><label for='data-644c5cd1-3eec-42dd-a98a-092cb24332c9' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[1.91473866e+06, 1.47945621e+06, 1.36028471e+06, ...,
        1.94187833e+00, 1.95975369e+00, 2.07151476e+00],
       [1.97716281e+06, 1.35648739e+06, 1.63877436e+06, ...,
        1.90008720e+00, 1.76008223e+00, 2.09466497e+00],
       [9.73830160e-01, 7.68956928e-01, 1.03891097e+00, ...,
        9.25128766e-01, 6.82586751e-01, 1.00886636e+00],
       ...,
       [1.42016873e+00, 8.73396019e-01, 1.23904051e+00, ...,
        1.14723090e+00, 1.27145347e+00, 9.40494323e-01],
       [1.96972776e+06, 1.80114117e+06, 1.63801728e+06, ...,
        2.53037078e+00, 1.96144836e+00, 2.37164783e+00],
       [2.34596686e+06, 1.77244286e+06, 1.36862577e+06, ...,
        2.05730051e+00, 1.76616880e+00, 1.88473841e+00]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>composition_grid</span></div><div class='xr-var-dims'>(grid, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.0 0.2041 ... 25.0 10.0 25.0</div><input id='attrs-9f72da65-e5e6-4302-9a81-1a590ba89d6f' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-9f72da65-e5e6-4302-9a81-1a590ba89d6f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-fbb987de-3caf-4a10-bad9-1b6640060b18' class='xr-var-data-in' type='checkbox'><label for='data-fbb987de-3caf-4a10-bad9-1b6640060b18' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[ 0.        ,  0.        ],
       [ 0.20408163,  0.        ],
       [ 0.40816327,  0.        ],
       ...,
       [ 9.59183673, 25.        ],
       [ 9.79591837, 25.        ],
       [10.        , 25.        ]])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-03f83db1-6c82-4ad7-a709-e00e4398f121' class='xr-section-summary-in' type='checkbox'  ><label for='section-03f83db1-6c82-4ad7-a709-e00e4398f121' class='xr-section-summary' >Indexes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>component</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-0292a53f-e815-435a-8124-398bb161168c' class='xr-index-data-in' type='checkbox'/><label for='index-0292a53f-e815-435a-8124-398bb161168c' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;A&#x27;, &#x27;B&#x27;], dtype=&#x27;object&#x27;, name=&#x27;component&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-4c7482c5-3a10-46af-a7bd-729495f0856a' class='xr-index-data-in' type='checkbox'/><label for='index-4c7482c5-3a10-46af-a7bd-729495f0856a' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([                0.001, 0.0010474522360006332, 0.0010971561867027272,
       0.0011492187010036998, 0.0012037516980200685, 0.0012608724076806808,
        0.001320703622736631, 0.0013833739627296209,  0.001449018150486198,
       0.0015177773017322714,
       ...
          0.6588581861506815,    0.6901224802908528,    0.7228703350949566,
            0.75717214883374,    0.7931016603333051,    0.8307361074919352,
          0.8701563933188907,    0.9114472598521185,    0.9546974703287516,
                         1.0],
      dtype=&#x27;float64&#x27;, name=&#x27;x&#x27;, length=150))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-ca595cb0-9930-4ef8-9fde-0affab79859c' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-ca595cb0-9930-4ef8-9fde-0affab79859c' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<p>Note how, in the second column of the table,the dimension names of each variable is listed. This is a foundational feature of all xarray data structure and underlys how they error check and align operations.</p>
</section>
<section id="Step-1:-Composition-Preprocessing">
<h2>Step 1: Composition Preprocessing<a class="headerlink" href="#Step-1:-Composition-Preprocessing" title="Permalink to this heading">#</a></h2>
<p>Many machine learning and optimization algorithms show better performance when their input data is normalized or standardized (i.e., the data is rescaled so that the mean and standard deviation is small).</p>
<p>To start, we’ll add Pipeline operations that normalize the <code class="docutils literal notranslate"><span class="pre">composition</span></code> and <code class="docutils literal notranslate"><span class="pre">composition_grid</span></code> data variables.</p>
<p>We’ll do this using the <code class="docutils literal notranslate"><span class="pre">Pipeline</span></code> context manager (i.e., the <code class="docutils literal notranslate"><span class="pre">with</span></code> construct shown below). Using this approach, each <code class="docutils literal notranslate"><span class="pre">Pipeline</span></code> operation that is defined in the context is automatically added to the <code class="docutils literal notranslate"><span class="pre">my_first_pipeline</span></code> variable.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">AFL.double_agent</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>

<span class="k">with</span> <span class="n">Pipeline</span><span class="p">()</span> <span class="k">as</span> <span class="n">my_first_pipeline</span><span class="p">:</span>
    <span class="n">Standardize</span><span class="p">(</span>
        <span class="n">input_variable</span><span class="o">=</span><span class="s1">&#39;composition&#39;</span><span class="p">,</span>
        <span class="n">output_variable</span><span class="o">=</span><span class="s1">&#39;normalized_composition&#39;</span><span class="p">,</span>
        <span class="n">dim</span><span class="o">=</span><span class="s1">&#39;sample&#39;</span><span class="p">,</span>
        <span class="n">component_dim</span><span class="o">=</span><span class="s1">&#39;component&#39;</span><span class="p">,</span>
        <span class="n">min_val</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;A&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">},</span>
        <span class="n">max_val</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;A&#39;</span><span class="p">:</span><span class="mf">10.0</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">:</span><span class="mf">25.0</span><span class="p">},</span>
    <span class="p">)</span>

<span class="n">my_first_pipeline</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;Pipeline Pipeline N=1&gt;
</pre></div></div>
</div>
<p>Going over the arguments to Standardize one by one:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">input_variable='composition'</span></code>: The data variable to normalize, in this case the ‘composition’ variable</p></li>
<li><p>`output_variable=’normalized_composition’: The name of the new variable that will store the normalized data</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dim='sample'</span></code>: The dimension along which to compute statistics for normalization</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">component_dim='component'</span></code>: The dimension containing different components/features</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">min_val={'A':0.0,'B':0.0}</span></code>: Dictionary specifying minimum values for each component</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_val={'A':10.0,'B':25.0}</span></code>: Dictionary specifying maximum values for each component</p></li>
</ul>
<p>We can view more information about the pipeline by printing it</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_first_pipeline</span><span class="o">.</span><span class="n">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PipelineOp                               input_variable ---&gt; output_variable
----------                               -----------------------------------
0  ) &lt;Standardize&gt;                       composition ---&gt; normalized_composition

Input Variables
---------------
0) composition

Output Variables
----------------
0) normalized_composition
</pre></div></div>
</div>
<p>You can add more operations to the <code class="docutils literal notranslate"><span class="pre">Pipeline</span></code> by recreating the context</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">my_first_pipeline</span><span class="p">:</span>
    <span class="n">Standardize</span><span class="p">(</span>
        <span class="n">input_variable</span><span class="o">=</span><span class="s1">&#39;composition_grid&#39;</span><span class="p">,</span>
        <span class="n">output_variable</span><span class="o">=</span><span class="s1">&#39;normalized_composition_grid&#39;</span><span class="p">,</span>
        <span class="n">dim</span><span class="o">=</span><span class="s1">&#39;grid&#39;</span><span class="p">,</span>
        <span class="n">component_dim</span><span class="o">=</span><span class="s1">&#39;component&#39;</span><span class="p">,</span>
        <span class="n">min_val</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;A&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">},</span>
        <span class="n">max_val</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;A&#39;</span><span class="p">:</span><span class="mf">10.0</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">:</span><span class="mf">25.0</span><span class="p">},</span>
    <span class="p">)</span>

<span class="n">my_first_pipeline</span><span class="o">.</span><span class="n">print</span><span class="p">()</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PipelineOp                               input_variable ---&gt; output_variable
----------                               -----------------------------------
0  ) &lt;Standardize&gt;                       composition ---&gt; normalized_composition
1  ) &lt;Standardize&gt;                       composition_grid ---&gt; normalized_composition_grid

Input Variables
---------------
0) composition
1) composition_grid

Output Variables
----------------
0) normalized_composition
1) normalized_composition_grid
</pre></div></div>
</div>
<p>We can run the pipeline by calling the <code class="docutils literal notranslate"><span class="pre">.calculate</span></code> method and passing in the input dataset <code class="docutils literal notranslate"><span class="pre">ds</span></code></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_result</span> <span class="o">=</span> <span class="n">my_first_pipeline</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="n">ds</span><span class="p">);</span>
<span class="n">ds_result</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "5e6b3e09a44b4b2a8326f6c9df390e19", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1f1f1f;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
  height: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "►";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "▼";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 205kB
Dimensions:                      (sample: 100, component: 2, x: 150, grid: 2500)
Coordinates:
  * component                    (component) &lt;U1 8B &#x27;A&#x27; &#x27;B&#x27;
  * x                            (x) float64 1kB 0.001 0.001047 ... 0.9547 1.0
Dimensions without coordinates: sample, grid
Data variables:
    composition                  (sample, component) float64 2kB 5.7 ... 5.104
    ground_truth_labels          (sample) int64 800B 1 1 0 1 0 1 ... 1 1 1 0 1 1
    measurement                  (sample, x) float64 120kB 1.915e+06 ... 1.885
    composition_grid             (grid, component) float64 40kB 0.0 0.0 ... 25.0
    normalized_composition       (sample, component) float64 2kB 0.57 ... 0.2042
    normalized_composition_grid  (grid, component) float64 40kB 0.0 0.0 ... 1.0</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-bf08e598-68e5-47b6-931f-18db4e2706e4' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-bf08e598-68e5-47b6-931f-18db4e2706e4' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span>sample</span>: 100</li><li><span class='xr-has-index'>component</span>: 2</li><li><span class='xr-has-index'>x</span>: 150</li><li><span>grid</span>: 2500</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-1414000f-27a7-452f-9688-c70e37f23a84' class='xr-section-summary-in' type='checkbox'  checked><label for='section-1414000f-27a7-452f-9688-c70e37f23a84' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>component</span></div><div class='xr-var-dims'>(component)</div><div class='xr-var-dtype'>&lt;U1</div><div class='xr-var-preview xr-preview'>&#x27;A&#x27; &#x27;B&#x27;</div><input id='attrs-4a9b7554-f66d-4f4a-baaa-abc750f67710' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-4a9b7554-f66d-4f4a-baaa-abc750f67710' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-65e55b54-6834-4ae3-b149-7ed2f5502914' class='xr-var-data-in' type='checkbox'><label for='data-65e55b54-6834-4ae3-b149-7ed2f5502914' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;A&#x27;, &#x27;B&#x27;], dtype=&#x27;&lt;U1&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.001 0.001047 ... 0.9547 1.0</div><input id='attrs-35753c96-be18-415f-b72b-70ec0bbec660' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-35753c96-be18-415f-b72b-70ec0bbec660' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6d3a0e5d-dbac-4139-9f1f-70c1e23f8b9b' class='xr-var-data-in' type='checkbox'><label for='data-6d3a0e5d-dbac-4139-9f1f-70c1e23f8b9b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0.001   , 0.001047, 0.001097, 0.001149, 0.001204, 0.001261, 0.001321,
       0.001383, 0.001449, 0.001518, 0.00159 , 0.001665, 0.001744, 0.001827,
       0.001914, 0.002005, 0.0021  , 0.002199, 0.002304, 0.002413, 0.002527,
       0.002647, 0.002773, 0.002905, 0.003042, 0.003187, 0.003338, 0.003496,
       0.003662, 0.003836, 0.004018, 0.004209, 0.004409, 0.004618, 0.004837,
       0.005066, 0.005307, 0.005559, 0.005822, 0.006099, 0.006388, 0.006691,
       0.007009, 0.007341, 0.00769 , 0.008055, 0.008437, 0.008837, 0.009256,
       0.009696, 0.010156, 0.010638, 0.011142, 0.011671, 0.012225, 0.012805,
       0.013413, 0.014049, 0.014716, 0.015414, 0.016146, 0.016912, 0.017714,
       0.018555, 0.019435, 0.020358, 0.021324, 0.022335, 0.023395, 0.024505,
       0.025668, 0.026886, 0.028162, 0.029498, 0.030898, 0.032364, 0.0339  ,
       0.035509, 0.037194, 0.038959, 0.040807, 0.042744, 0.044772, 0.046897,
       0.049122, 0.051453, 0.053894, 0.056452, 0.059131, 0.061936, 0.064875,
       0.067954, 0.071179, 0.074556, 0.078094, 0.0818  , 0.085681, 0.089747,
       0.094006, 0.098467, 0.103139, 0.108033, 0.11316 , 0.118529, 0.124154,
       0.130045, 0.136216, 0.14268 , 0.14945 , 0.156542, 0.16397 , 0.171751,
       0.179901, 0.188438, 0.197379, 0.206746, 0.216556, 0.226832, 0.237596,
       0.24887 , 0.26068 , 0.27305 , 0.286006, 0.299578, 0.313794, 0.328684,
       0.344281, 0.360618, 0.37773 , 0.395654, 0.414429, 0.434094, 0.454693,
       0.476269, 0.498869, 0.522542, 0.547337, 0.57331 , 0.600514, 0.62901 ,
       0.658858, 0.690122, 0.72287 , 0.757172, 0.793102, 0.830736, 0.870156,
       0.911447, 0.954697, 1.      ])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-6e5c6a34-674b-4518-b64a-c0bc8e9a3e9a' class='xr-section-summary-in' type='checkbox'  checked><label for='section-6e5c6a34-674b-4518-b64a-c0bc8e9a3e9a' class='xr-section-summary' >Data variables: <span>(6)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>composition</span></div><div class='xr-var-dims'>(sample, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>5.7 1.36 8.938 ... 0.478 5.104</div><input id='attrs-5f09829c-4cd2-4e6b-9361-bc7e8b42e7c4' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-5f09829c-4cd2-4e6b-9361-bc7e8b42e7c4' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d22a83c7-6a0e-4641-a932-a3f7997e92eb' class='xr-var-data-in' type='checkbox'><label for='data-d22a83c7-6a0e-4641-a932-a3f7997e92eb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[ 5.69995762,  1.36017531],
       [ 8.93782024, 16.17384162],
       [ 3.77901101, 19.69531938],
       [ 9.82535598,  7.16351158],
       [ 1.60370118, 23.73217969],
       [ 7.90994751, 14.71385158],
       [ 2.17465804,  4.75450299],
       [ 9.30875652,  2.86311327],
       [ 2.78926787,  0.04909185],
       [ 5.0368155 , 17.80655234],
       [ 1.18529693, 16.40857492],
       [ 1.65214034, 19.7760677 ],
       [ 2.73176727,  0.18850408],
       [ 9.22314222,  7.21778243],
       [ 8.33560023,  5.22074632],
       [ 8.10711809, 22.36120136],
       [ 4.10263293,  6.17733076],
       [ 7.94096049, 10.98300725],
       [ 6.58238609, 15.27804755],
       [ 3.78026574, 20.5150357 ],
...
       [ 5.0825235 ,  5.36441059],
       [ 8.50770583,  2.52786027],
       [ 4.46324027,  6.75171924],
       [ 8.52523439,  6.71058719],
       [ 9.23218578, 20.72269505],
       [ 6.7555881 , 10.24855529],
       [ 7.67539066,  1.6795503 ],
       [ 5.8397554 , 10.64947346],
       [ 0.22478436, 18.35236821],
       [ 8.83077635, 10.65541542],
       [ 8.98441453,  0.03322162],
       [ 0.11755953, 11.77699299],
       [ 7.90192605, 18.94690136],
       [ 7.42679234, 23.72441631],
       [ 8.7338296 , 12.27428886],
       [ 2.2094947 ,  9.43848935],
       [ 8.92898549, 10.34927984],
       [ 0.79890552, 16.37383273],
       [ 2.50284147,  0.0800645 ],
       [ 0.47797863,  5.10399908]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ground_truth_labels</span></div><div class='xr-var-dims'>(sample)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1 1 0 1 0 1 1 1 ... 1 1 1 1 1 0 1 1</div><input id='attrs-913b81ac-24f2-4bc7-a77f-bad5664cdb84' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-913b81ac-24f2-4bc7-a77f-bad5664cdb84' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2e990310-5172-4159-be93-7123a0d59e31' class='xr-var-data-in' type='checkbox'><label for='data-2e990310-5172-4159-be93-7123a0d59e31' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1,
       1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
       1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1,
       1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
       0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>measurement</span></div><div class='xr-var-dims'>(sample, x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.915e+06 1.479e+06 ... 1.766 1.885</div><input id='attrs-36c86a3a-c103-4660-bec9-f6fb6e87bd42' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-36c86a3a-c103-4660-bec9-f6fb6e87bd42' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b3161556-16a8-4ed9-a0df-63e45912f4af' class='xr-var-data-in' type='checkbox'><label for='data-b3161556-16a8-4ed9-a0df-63e45912f4af' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[1.91473866e+06, 1.47945621e+06, 1.36028471e+06, ...,
        1.94187833e+00, 1.95975369e+00, 2.07151476e+00],
       [1.97716281e+06, 1.35648739e+06, 1.63877436e+06, ...,
        1.90008720e+00, 1.76008223e+00, 2.09466497e+00],
       [9.73830160e-01, 7.68956928e-01, 1.03891097e+00, ...,
        9.25128766e-01, 6.82586751e-01, 1.00886636e+00],
       ...,
       [1.42016873e+00, 8.73396019e-01, 1.23904051e+00, ...,
        1.14723090e+00, 1.27145347e+00, 9.40494323e-01],
       [1.96972776e+06, 1.80114117e+06, 1.63801728e+06, ...,
        2.53037078e+00, 1.96144836e+00, 2.37164783e+00],
       [2.34596686e+06, 1.77244286e+06, 1.36862577e+06, ...,
        2.05730051e+00, 1.76616880e+00, 1.88473841e+00]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>composition_grid</span></div><div class='xr-var-dims'>(grid, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.0 0.2041 ... 25.0 10.0 25.0</div><input id='attrs-6e681d5a-e64d-4cb1-ac4f-8cd99834328e' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-6e681d5a-e64d-4cb1-ac4f-8cd99834328e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3b1719a3-5440-45d3-ae1d-47ffc5f5f4cd' class='xr-var-data-in' type='checkbox'><label for='data-3b1719a3-5440-45d3-ae1d-47ffc5f5f4cd' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[ 0.        ,  0.        ],
       [ 0.20408163,  0.        ],
       [ 0.40816327,  0.        ],
       ...,
       [ 9.59183673, 25.        ],
       [ 9.79591837, 25.        ],
       [10.        , 25.        ]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>normalized_composition</span></div><div class='xr-var-dims'>(sample, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.57 0.05441 ... 0.0478 0.2042</div><input id='attrs-47fa49c5-ba46-4eaf-8891-f53b690d4cbc' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-47fa49c5-ba46-4eaf-8891-f53b690d4cbc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-36606e22-e4f4-4e95-867e-eb64d2a61ad4' class='xr-var-data-in' type='checkbox'><label for='data-36606e22-e4f4-4e95-867e-eb64d2a61ad4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>description :</span></dt><dd>Data normalized to have range 0 -&gt; 1</dd><dt><span>name :</span></dt><dd>Standardize</dd><dt><span>input_variable :</span></dt><dd>composition</dd><dt><span>output_variable :</span></dt><dd>normalized_composition</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>dim :</span></dt><dd>sample</dd><dt><span>component_dim :</span></dt><dd>component</dd><dt><span>min_val :</span></dt><dd>{&#x27;A&#x27;: 0.0, &#x27;B&#x27;: 0.0}</dd><dt><span>max_val :</span></dt><dd>{&#x27;A&#x27;: 10.0, &#x27;B&#x27;: 25.0}</dd><dt><span>scale_variable :</span></dt><dd>None</dd></dl></div><div class='xr-var-data'><pre>array([[0.56999576, 0.05440701],
       [0.89378202, 0.64695366],
       [0.3779011 , 0.78781278],
       [0.9825356 , 0.28654046],
       [0.16037012, 0.94928719],
       [0.79099475, 0.58855406],
       [0.2174658 , 0.19018012],
       [0.93087565, 0.11452453],
       [0.27892679, 0.00196367],
       [0.50368155, 0.71226209],
       [0.11852969, 0.656343  ],
       [0.16521403, 0.79104271],
       [0.27317673, 0.00754016],
       [0.92231422, 0.2887113 ],
       [0.83356002, 0.20882985],
       [0.81071181, 0.89444805],
       [0.41026329, 0.24709323],
       [0.79409605, 0.43932029],
       [0.65823861, 0.6111219 ],
       [0.37802657, 0.82060143],
...
       [0.50825235, 0.21457642],
       [0.85077058, 0.10111441],
       [0.44632403, 0.27006877],
       [0.85252344, 0.26842349],
       [0.92321858, 0.8289078 ],
       [0.67555881, 0.40994221],
       [0.76753907, 0.06718201],
       [0.58397554, 0.42597894],
       [0.02247844, 0.73409473],
       [0.88307764, 0.42621662],
       [0.89844145, 0.00132886],
       [0.01175595, 0.47107972],
       [0.7901926 , 0.75787605],
       [0.74267923, 0.94897665],
       [0.87338296, 0.49097155],
       [0.22094947, 0.37753957],
       [0.89289855, 0.41397119],
       [0.07989055, 0.65495331],
       [0.25028415, 0.00320258],
       [0.04779786, 0.20415996]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>normalized_composition_grid</span></div><div class='xr-var-dims'>(grid, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.0 0.02041 0.0 ... 1.0 1.0 1.0</div><input id='attrs-29a26229-29c7-4928-b403-5fff530f42d8' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-29a26229-29c7-4928-b403-5fff530f42d8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3d5068de-699c-42ed-bdb0-e1dfe0feffb7' class='xr-var-data-in' type='checkbox'><label for='data-3d5068de-699c-42ed-bdb0-e1dfe0feffb7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>description :</span></dt><dd>Data normalized to have range 0 -&gt; 1</dd><dt><span>name :</span></dt><dd>Standardize</dd><dt><span>input_variable :</span></dt><dd>composition_grid</dd><dt><span>output_variable :</span></dt><dd>normalized_composition_grid</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>dim :</span></dt><dd>grid</dd><dt><span>component_dim :</span></dt><dd>component</dd><dt><span>min_val :</span></dt><dd>{&#x27;A&#x27;: 0.0, &#x27;B&#x27;: 0.0}</dd><dt><span>max_val :</span></dt><dd>{&#x27;A&#x27;: 10.0, &#x27;B&#x27;: 25.0}</dd><dt><span>scale_variable :</span></dt><dd>None</dd></dl></div><div class='xr-var-data'><pre>array([[0.        , 0.        ],
       [0.02040816, 0.        ],
       [0.04081633, 0.        ],
       ...,
       [0.95918367, 1.        ],
       [0.97959184, 1.        ],
       [1.        , 1.        ]])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-34f297c6-2ca1-45f8-8e9a-608cfdee90bd' class='xr-section-summary-in' type='checkbox'  ><label for='section-34f297c6-2ca1-45f8-8e9a-608cfdee90bd' class='xr-section-summary' >Indexes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>component</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-64537286-f32b-4a82-b16f-b163ca7168b1' class='xr-index-data-in' type='checkbox'/><label for='index-64537286-f32b-4a82-b16f-b163ca7168b1' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;A&#x27;, &#x27;B&#x27;], dtype=&#x27;object&#x27;, name=&#x27;component&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-50239969-b0a1-4d4b-b9b8-c1f9d7893a8e' class='xr-index-data-in' type='checkbox'/><label for='index-50239969-b0a1-4d4b-b9b8-c1f9d7893a8e' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([                0.001, 0.0010474522360006332, 0.0010971561867027272,
       0.0011492187010036998, 0.0012037516980200685, 0.0012608724076806808,
        0.001320703622736631, 0.0013833739627296209,  0.001449018150486198,
       0.0015177773017322714,
       ...
          0.6588581861506815,    0.6901224802908528,    0.7228703350949566,
            0.75717214883374,    0.7931016603333051,    0.8307361074919352,
          0.8701563933188907,    0.9114472598521185,    0.9546974703287516,
                         1.0],
      dtype=&#x27;float64&#x27;, name=&#x27;x&#x27;, length=150))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-868dd175-36f7-478d-8a3a-95d2c78f3e39' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-868dd175-36f7-478d-8a3a-95d2c78f3e39' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<p>Note that the output dataset <code class="docutils literal notranslate"><span class="pre">ds_result</span></code> contains not only all of the data from <code class="docutils literal notranslate"><span class="pre">ds</span></code> but also two new variables that were produced by the pipeline operations that we added: <code class="docutils literal notranslate"><span class="pre">normalized</span> <span class="pre">composition</span></code> and <code class="docutils literal notranslate"><span class="pre">normalized_composition_grid</span></code>.</p>
<p>We can visualise the results of the normalization by plotting the <code class="docutils literal notranslate"><span class="pre">composition</span></code> and <code class="docutils literal notranslate"><span class="pre">normalized_composition</span></code> variables side-by-side. We’ll do this by using the <code class="docutils literal notranslate"><span class="pre">plot_scatter_mpl</span></code> helper function from <code class="docutils literal notranslate"><span class="pre">AFL.double_agent.plotting</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span><span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mf">3.25</span><span class="p">))</span>

<span class="n">plot_scatter_mpl</span><span class="p">(</span><span class="n">ds_result</span><span class="p">,</span><span class="s1">&#39;composition&#39;</span><span class="p">,</span><span class="n">component_dim</span><span class="o">=</span><span class="s1">&#39;component&#39;</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="s1">&#39;ground_truth_labels&#39;</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Raw Composition Data&#39;</span><span class="p">)</span>

<span class="n">plot_scatter_mpl</span><span class="p">(</span><span class="n">ds_result</span><span class="p">,</span><span class="s1">&#39;normalized_composition&#39;</span><span class="p">,</span><span class="n">component_dim</span><span class="o">=</span><span class="s1">&#39;component&#39;</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="s1">&#39;ground_truth_labels&#39;</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Normalized Composition Data&#39;</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[Text(0.5, 1.0, &#39;Normalized Composition Data&#39;)]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_building_pipelines_20_1.png" src="../_images/tutorials_building_pipelines_20_1.png" />
</div>
</div>
<p>Note that the relative data positions are unchanged, only the magnitude of the axes is changed.</p>
</section>
<section id="Step-2:-Savitsky-Golay-Filter">
<h2>Step 2: Savitsky-Golay Filter<a class="headerlink" href="#Step-2:-Savitsky-Golay-Filter" title="Permalink to this heading">#</a></h2>
<p>Now that we have the composition data processed, we can move on to processing the measurement data. In many cases, smoothing and filtering data can help remove noise and emphasize features in data that you want your agent to focus on.</p>
<p>Here we’ll add a <code class="docutils literal notranslate"><span class="pre">SavgolFilter</span></code> operation in order to calculate the first derivative of the measurement data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">my_first_pipeline</span><span class="p">:</span>

       <span class="n">SavgolFilter</span><span class="p">(</span>
           <span class="n">input_variable</span><span class="o">=</span><span class="s1">&#39;measurement&#39;</span><span class="p">,</span>
           <span class="n">output_variable</span><span class="o">=</span><span class="s1">&#39;derivative&#39;</span><span class="p">,</span>
           <span class="n">dim</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span>
           <span class="n">window_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
           <span class="n">apply_log_scale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
           <span class="n">derivative</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>

           <span class="p">)</span>

<span class="n">my_first_pipeline</span><span class="o">.</span><span class="n">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PipelineOp                               input_variable ---&gt; output_variable
----------                               -----------------------------------
0  ) &lt;Standardize&gt;                       composition ---&gt; normalized_composition
1  ) &lt;Standardize&gt;                       composition_grid ---&gt; normalized_composition_grid
2  ) &lt;SavgolFilter&gt;                      measurement ---&gt; derivative

Input Variables
---------------
0) composition
1) composition_grid
2) measurement

Output Variables
----------------
0) normalized_composition
1) normalized_composition_grid
2) derivative
</pre></div></div>
</div>
<p>Let’s go through each argument passed to SavgolFilter:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">input_variable='measurement'</span></code>: Specifies the data variable to filter, in this case the raw measurement data</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output_variable='derivative'</span></code>: Names the new variable that will store the filtered/derivative data</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dim='x'</span></code>: Indicates which dimension to apply the filter along (the x-axis values)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">window_length=50</span></code>: Sets the size of the moving window used for filtering - larger values give smoother results</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">apply_log_scale=True</span></code>: Takes the log of the x-axis values before filtering, useful for data spanning multiple orders of magnitude</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">derivative=1</span></code>: Calculates the first derivative of the data while filtering</p></li>
</ul>
<p>We can run the pipeline on the dataset and plot the results.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_result</span> <span class="o">=</span> <span class="n">my_first_pipeline</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
<span class="n">ds_result</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "f82802c51a6e44d3baae14cd7202b0cc", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1f1f1f;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
  height: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "►";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "▼";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 407kB
Dimensions:                      (sample: 100, component: 2, x: 150,
                                  grid: 2500, log_x: 250)
Coordinates:
  * component                    (component) &lt;U1 8B &#x27;A&#x27; &#x27;B&#x27;
  * x                            (x) float64 1kB 0.001 0.001047 ... 0.9547 1.0
  * log_x                        (log_x) float64 2kB -3.0 -2.988 ... 0.0
Dimensions without coordinates: sample, grid
Data variables:
    composition                  (sample, component) float64 2kB 5.7 ... 5.104
    ground_truth_labels          (sample) int64 800B 1 1 0 1 0 1 ... 1 1 1 0 1 1
    measurement                  (sample, x) float64 120kB 1.915e+06 ... 1.885
    composition_grid             (grid, component) float64 40kB 0.0 0.0 ... 25.0
    normalized_composition       (sample, component) float64 2kB 0.57 ... 0.2042
    normalized_composition_grid  (grid, component) float64 40kB 0.0 0.0 ... 1.0
    derivative                   (sample, log_x) float64 200kB -3.82 ... -0.4063</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-08d9cf13-8a76-45b7-a2dc-a9bd9d1c6d2a' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-08d9cf13-8a76-45b7-a2dc-a9bd9d1c6d2a' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span>sample</span>: 100</li><li><span class='xr-has-index'>component</span>: 2</li><li><span class='xr-has-index'>x</span>: 150</li><li><span>grid</span>: 2500</li><li><span class='xr-has-index'>log_x</span>: 250</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-2ccac94c-9880-4c63-bd9e-1756ce58258c' class='xr-section-summary-in' type='checkbox'  checked><label for='section-2ccac94c-9880-4c63-bd9e-1756ce58258c' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>component</span></div><div class='xr-var-dims'>(component)</div><div class='xr-var-dtype'>&lt;U1</div><div class='xr-var-preview xr-preview'>&#x27;A&#x27; &#x27;B&#x27;</div><input id='attrs-ece68849-3a4e-4dd0-bd34-a6ce07505800' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-ece68849-3a4e-4dd0-bd34-a6ce07505800' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-7e4c808e-2c9b-4dc1-99f7-a622edd0a8d8' class='xr-var-data-in' type='checkbox'><label for='data-7e4c808e-2c9b-4dc1-99f7-a622edd0a8d8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;A&#x27;, &#x27;B&#x27;], dtype=&#x27;&lt;U1&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.001 0.001047 ... 0.9547 1.0</div><input id='attrs-a2058df3-083d-4b8e-91b7-39d1ef995177' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-a2058df3-083d-4b8e-91b7-39d1ef995177' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4dbb5606-76d2-43a8-8b43-fe4f54c1dee7' class='xr-var-data-in' type='checkbox'><label for='data-4dbb5606-76d2-43a8-8b43-fe4f54c1dee7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0.001   , 0.001047, 0.001097, 0.001149, 0.001204, 0.001261, 0.001321,
       0.001383, 0.001449, 0.001518, 0.00159 , 0.001665, 0.001744, 0.001827,
       0.001914, 0.002005, 0.0021  , 0.002199, 0.002304, 0.002413, 0.002527,
       0.002647, 0.002773, 0.002905, 0.003042, 0.003187, 0.003338, 0.003496,
       0.003662, 0.003836, 0.004018, 0.004209, 0.004409, 0.004618, 0.004837,
       0.005066, 0.005307, 0.005559, 0.005822, 0.006099, 0.006388, 0.006691,
       0.007009, 0.007341, 0.00769 , 0.008055, 0.008437, 0.008837, 0.009256,
       0.009696, 0.010156, 0.010638, 0.011142, 0.011671, 0.012225, 0.012805,
       0.013413, 0.014049, 0.014716, 0.015414, 0.016146, 0.016912, 0.017714,
       0.018555, 0.019435, 0.020358, 0.021324, 0.022335, 0.023395, 0.024505,
       0.025668, 0.026886, 0.028162, 0.029498, 0.030898, 0.032364, 0.0339  ,
       0.035509, 0.037194, 0.038959, 0.040807, 0.042744, 0.044772, 0.046897,
       0.049122, 0.051453, 0.053894, 0.056452, 0.059131, 0.061936, 0.064875,
       0.067954, 0.071179, 0.074556, 0.078094, 0.0818  , 0.085681, 0.089747,
       0.094006, 0.098467, 0.103139, 0.108033, 0.11316 , 0.118529, 0.124154,
       0.130045, 0.136216, 0.14268 , 0.14945 , 0.156542, 0.16397 , 0.171751,
       0.179901, 0.188438, 0.197379, 0.206746, 0.216556, 0.226832, 0.237596,
       0.24887 , 0.26068 , 0.27305 , 0.286006, 0.299578, 0.313794, 0.328684,
       0.344281, 0.360618, 0.37773 , 0.395654, 0.414429, 0.434094, 0.454693,
       0.476269, 0.498869, 0.522542, 0.547337, 0.57331 , 0.600514, 0.62901 ,
       0.658858, 0.690122, 0.72287 , 0.757172, 0.793102, 0.830736, 0.870156,
       0.911447, 0.954697, 1.      ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>log_x</span></div><div class='xr-var-dims'>(log_x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-3.0 -2.988 -2.976 ... -0.01205 0.0</div><input id='attrs-c310f043-b09a-4c12-a9b7-c56487a8d223' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-c310f043-b09a-4c12-a9b7-c56487a8d223' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e77c2112-c0f3-429f-8d90-e15058694e84' class='xr-var-data-in' type='checkbox'><label for='data-e77c2112-c0f3-429f-8d90-e15058694e84' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([-3.      , -2.987952, -2.975904, ..., -0.024096, -0.012048,  0.      ])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-6737158b-f357-4086-a8ad-f7dee470b182' class='xr-section-summary-in' type='checkbox'  checked><label for='section-6737158b-f357-4086-a8ad-f7dee470b182' class='xr-section-summary' >Data variables: <span>(7)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>composition</span></div><div class='xr-var-dims'>(sample, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>5.7 1.36 8.938 ... 0.478 5.104</div><input id='attrs-b5d5aa91-f925-4203-907b-7c0d885ede2d' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b5d5aa91-f925-4203-907b-7c0d885ede2d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-cd486f3e-d565-4673-ac28-9c7a0512eac7' class='xr-var-data-in' type='checkbox'><label for='data-cd486f3e-d565-4673-ac28-9c7a0512eac7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[ 5.69995762,  1.36017531],
       [ 8.93782024, 16.17384162],
       [ 3.77901101, 19.69531938],
       [ 9.82535598,  7.16351158],
       [ 1.60370118, 23.73217969],
       [ 7.90994751, 14.71385158],
       [ 2.17465804,  4.75450299],
       [ 9.30875652,  2.86311327],
       [ 2.78926787,  0.04909185],
       [ 5.0368155 , 17.80655234],
       [ 1.18529693, 16.40857492],
       [ 1.65214034, 19.7760677 ],
       [ 2.73176727,  0.18850408],
       [ 9.22314222,  7.21778243],
       [ 8.33560023,  5.22074632],
       [ 8.10711809, 22.36120136],
       [ 4.10263293,  6.17733076],
       [ 7.94096049, 10.98300725],
       [ 6.58238609, 15.27804755],
       [ 3.78026574, 20.5150357 ],
...
       [ 5.0825235 ,  5.36441059],
       [ 8.50770583,  2.52786027],
       [ 4.46324027,  6.75171924],
       [ 8.52523439,  6.71058719],
       [ 9.23218578, 20.72269505],
       [ 6.7555881 , 10.24855529],
       [ 7.67539066,  1.6795503 ],
       [ 5.8397554 , 10.64947346],
       [ 0.22478436, 18.35236821],
       [ 8.83077635, 10.65541542],
       [ 8.98441453,  0.03322162],
       [ 0.11755953, 11.77699299],
       [ 7.90192605, 18.94690136],
       [ 7.42679234, 23.72441631],
       [ 8.7338296 , 12.27428886],
       [ 2.2094947 ,  9.43848935],
       [ 8.92898549, 10.34927984],
       [ 0.79890552, 16.37383273],
       [ 2.50284147,  0.0800645 ],
       [ 0.47797863,  5.10399908]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ground_truth_labels</span></div><div class='xr-var-dims'>(sample)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1 1 0 1 0 1 1 1 ... 1 1 1 1 1 0 1 1</div><input id='attrs-5cb1512b-5d80-4b0f-b4d3-d017f2bc12bf' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-5cb1512b-5d80-4b0f-b4d3-d017f2bc12bf' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-de0c5dd9-723e-4e45-9169-4f16e72ed6aa' class='xr-var-data-in' type='checkbox'><label for='data-de0c5dd9-723e-4e45-9169-4f16e72ed6aa' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1,
       1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
       1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1,
       1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
       0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>measurement</span></div><div class='xr-var-dims'>(sample, x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.915e+06 1.479e+06 ... 1.766 1.885</div><input id='attrs-28924d1e-b940-4793-b623-a070861f449b' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-28924d1e-b940-4793-b623-a070861f449b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-331dd0ba-406e-4e6a-acff-9d45932b18e1' class='xr-var-data-in' type='checkbox'><label for='data-331dd0ba-406e-4e6a-acff-9d45932b18e1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[1.91473866e+06, 1.47945621e+06, 1.36028471e+06, ...,
        1.94187833e+00, 1.95975369e+00, 2.07151476e+00],
       [1.97716281e+06, 1.35648739e+06, 1.63877436e+06, ...,
        1.90008720e+00, 1.76008223e+00, 2.09466497e+00],
       [9.73830160e-01, 7.68956928e-01, 1.03891097e+00, ...,
        9.25128766e-01, 6.82586751e-01, 1.00886636e+00],
       ...,
       [1.42016873e+00, 8.73396019e-01, 1.23904051e+00, ...,
        1.14723090e+00, 1.27145347e+00, 9.40494323e-01],
       [1.96972776e+06, 1.80114117e+06, 1.63801728e+06, ...,
        2.53037078e+00, 1.96144836e+00, 2.37164783e+00],
       [2.34596686e+06, 1.77244286e+06, 1.36862577e+06, ...,
        2.05730051e+00, 1.76616880e+00, 1.88473841e+00]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>composition_grid</span></div><div class='xr-var-dims'>(grid, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.0 0.2041 ... 25.0 10.0 25.0</div><input id='attrs-69e665a3-7097-4399-98c9-d8450079ca13' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-69e665a3-7097-4399-98c9-d8450079ca13' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c754701c-57cf-45dd-b473-c5547af2e1b4' class='xr-var-data-in' type='checkbox'><label for='data-c754701c-57cf-45dd-b473-c5547af2e1b4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[ 0.        ,  0.        ],
       [ 0.20408163,  0.        ],
       [ 0.40816327,  0.        ],
       ...,
       [ 9.59183673, 25.        ],
       [ 9.79591837, 25.        ],
       [10.        , 25.        ]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>normalized_composition</span></div><div class='xr-var-dims'>(sample, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.57 0.05441 ... 0.0478 0.2042</div><input id='attrs-ed93b3af-067f-4136-99c3-039857295c99' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ed93b3af-067f-4136-99c3-039857295c99' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1649878f-71c2-4ba0-9b61-90310555d42d' class='xr-var-data-in' type='checkbox'><label for='data-1649878f-71c2-4ba0-9b61-90310555d42d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>description :</span></dt><dd>Data normalized to have range 0 -&gt; 1</dd><dt><span>name :</span></dt><dd>Standardize</dd><dt><span>input_variable :</span></dt><dd>composition</dd><dt><span>output_variable :</span></dt><dd>normalized_composition</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>dim :</span></dt><dd>sample</dd><dt><span>component_dim :</span></dt><dd>component</dd><dt><span>min_val :</span></dt><dd>{&#x27;A&#x27;: 0.0, &#x27;B&#x27;: 0.0}</dd><dt><span>max_val :</span></dt><dd>{&#x27;A&#x27;: 10.0, &#x27;B&#x27;: 25.0}</dd><dt><span>scale_variable :</span></dt><dd>None</dd></dl></div><div class='xr-var-data'><pre>array([[0.56999576, 0.05440701],
       [0.89378202, 0.64695366],
       [0.3779011 , 0.78781278],
       [0.9825356 , 0.28654046],
       [0.16037012, 0.94928719],
       [0.79099475, 0.58855406],
       [0.2174658 , 0.19018012],
       [0.93087565, 0.11452453],
       [0.27892679, 0.00196367],
       [0.50368155, 0.71226209],
       [0.11852969, 0.656343  ],
       [0.16521403, 0.79104271],
       [0.27317673, 0.00754016],
       [0.92231422, 0.2887113 ],
       [0.83356002, 0.20882985],
       [0.81071181, 0.89444805],
       [0.41026329, 0.24709323],
       [0.79409605, 0.43932029],
       [0.65823861, 0.6111219 ],
       [0.37802657, 0.82060143],
...
       [0.50825235, 0.21457642],
       [0.85077058, 0.10111441],
       [0.44632403, 0.27006877],
       [0.85252344, 0.26842349],
       [0.92321858, 0.8289078 ],
       [0.67555881, 0.40994221],
       [0.76753907, 0.06718201],
       [0.58397554, 0.42597894],
       [0.02247844, 0.73409473],
       [0.88307764, 0.42621662],
       [0.89844145, 0.00132886],
       [0.01175595, 0.47107972],
       [0.7901926 , 0.75787605],
       [0.74267923, 0.94897665],
       [0.87338296, 0.49097155],
       [0.22094947, 0.37753957],
       [0.89289855, 0.41397119],
       [0.07989055, 0.65495331],
       [0.25028415, 0.00320258],
       [0.04779786, 0.20415996]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>normalized_composition_grid</span></div><div class='xr-var-dims'>(grid, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.0 0.02041 0.0 ... 1.0 1.0 1.0</div><input id='attrs-7bcb3627-c1cb-4aa9-8fc7-7cfd0023c672' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7bcb3627-c1cb-4aa9-8fc7-7cfd0023c672' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-62e2630e-ec3e-4da9-9035-1bf40c198eff' class='xr-var-data-in' type='checkbox'><label for='data-62e2630e-ec3e-4da9-9035-1bf40c198eff' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>description :</span></dt><dd>Data normalized to have range 0 -&gt; 1</dd><dt><span>name :</span></dt><dd>Standardize</dd><dt><span>input_variable :</span></dt><dd>composition_grid</dd><dt><span>output_variable :</span></dt><dd>normalized_composition_grid</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>dim :</span></dt><dd>grid</dd><dt><span>component_dim :</span></dt><dd>component</dd><dt><span>min_val :</span></dt><dd>{&#x27;A&#x27;: 0.0, &#x27;B&#x27;: 0.0}</dd><dt><span>max_val :</span></dt><dd>{&#x27;A&#x27;: 10.0, &#x27;B&#x27;: 25.0}</dd><dt><span>scale_variable :</span></dt><dd>None</dd></dl></div><div class='xr-var-data'><pre>array([[0.        , 0.        ],
       [0.02040816, 0.        ],
       [0.04081633, 0.        ],
       ...,
       [0.95918367, 1.        ],
       [0.97959184, 1.        ],
       [1.        , 1.        ]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>derivative</span></div><div class='xr-var-dims'>(sample, log_x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-3.82 -3.825 ... -0.3897 -0.4063</div><input id='attrs-b8fd0deb-34c2-47ea-a7f1-2c9bdea403f1' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b8fd0deb-34c2-47ea-a7f1-2c9bdea403f1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c97384ec-a2f9-40fc-91ba-cfaa2b3cbec6' class='xr-var-data-in' type='checkbox'><label for='data-c97384ec-a2f9-40fc-91ba-cfaa2b3cbec6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>description :</span></dt><dd>Savitsky-Golay filtered data</dd><dt><span>name :</span></dt><dd>SavgolFilter</dd><dt><span>input_variable :</span></dt><dd>measurement</dd><dt><span>output_variable :</span></dt><dd>derivative</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>dim :</span></dt><dd>x</dd><dt><span>npts :</span></dt><dd>250</dd><dt><span>xlo :</span></dt><dd>None</dd><dt><span>xhi :</span></dt><dd>None</dd><dt><span>xlo_isel :</span></dt><dd>None</dd><dt><span>xhi_isel :</span></dt><dd>None</dd><dt><span>pedestal :</span></dt><dd>None</dd><dt><span>derivative :</span></dt><dd>1</dd><dt><span>apply_log_scale :</span></dt><dd>True</dd><dt><span>polyorder :</span></dt><dd>2</dd><dt><span>window_length :</span></dt><dd>50</dd></dl></div><div class='xr-var-data'><pre>array([[-3.82019992, -3.82462256, -3.82904519, ..., -0.35145453,
        -0.36993018, -0.38840584],
       [-4.2626048 , -4.24893257, -4.23526033, ...,  0.01349491,
         0.01809932,  0.02270373],
       [ 0.50261177,  0.4760206 ,  0.44942943, ...,  0.12473091,
         0.13576784,  0.14680477],
       ...,
       [-0.24159282, -0.24193045, -0.24226809, ...,  0.52407629,
         0.54400047,  0.56392465],
       [-3.67922195, -3.69182355, -3.70442514, ...,  0.30180559,
         0.31353524,  0.32526489],
       [-3.96638732, -3.97110223, -3.97581713, ..., -0.37305086,
        -0.389679  , -0.40630713]])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-c2cad638-87cf-422a-a954-2d48ddc4329d' class='xr-section-summary-in' type='checkbox'  ><label for='section-c2cad638-87cf-422a-a954-2d48ddc4329d' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>component</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-6e4bd182-1463-4ddd-8820-e69732f96ccd' class='xr-index-data-in' type='checkbox'/><label for='index-6e4bd182-1463-4ddd-8820-e69732f96ccd' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;A&#x27;, &#x27;B&#x27;], dtype=&#x27;object&#x27;, name=&#x27;component&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-ec1f6851-cd3e-4b64-b05f-31429e7203fb' class='xr-index-data-in' type='checkbox'/><label for='index-ec1f6851-cd3e-4b64-b05f-31429e7203fb' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([                0.001, 0.0010474522360006332, 0.0010971561867027272,
       0.0011492187010036998, 0.0012037516980200685, 0.0012608724076806808,
        0.001320703622736631, 0.0013833739627296209,  0.001449018150486198,
       0.0015177773017322714,
       ...
          0.6588581861506815,    0.6901224802908528,    0.7228703350949566,
            0.75717214883374,    0.7931016603333051,    0.8307361074919352,
          0.8701563933188907,    0.9114472598521185,    0.9546974703287516,
                         1.0],
      dtype=&#x27;float64&#x27;, name=&#x27;x&#x27;, length=150))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>log_x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-f1f68ac6-6b9e-4e95-a02b-555a82dbc8ea' class='xr-index-data-in' type='checkbox'/><label for='index-f1f68ac6-6b9e-4e95-a02b-555a82dbc8ea' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([                 -3.0,   -2.9879518072289155,   -2.9759036144578315,
          -2.963855421686747,   -2.9518072289156625,   -2.9397590361445785,
          -2.927710843373494,   -2.9156626506024095,   -2.9036144578313254,
          -2.891566265060241,
       ...
        -0.10843373493975905,  -0.09638554216867457,  -0.08433734939759008,
        -0.07228915662650603,  -0.06024096385542155,  -0.04819277108433706,
        -0.03614457831325302,  -0.02409638554216853, -0.012048192771084043,
                         0.0],
      dtype=&#x27;float64&#x27;, name=&#x27;log_x&#x27;, length=250))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-80662140-3ccf-4f2f-bc41-2421ee00c698' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-80662140-3ccf-4f2f-bc41-2421ee00c698' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<p>Now we can plot the results of the <code class="docutils literal notranslate"><span class="pre">Savgol</span></code> filter</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span><span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mf">3.25</span><span class="p">))</span>

<span class="n">ds_result</span><span class="o">.</span><span class="n">measurement</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="n">xscale</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">,</span><span class="n">yscale</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">add_legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">ds_result</span><span class="o">.</span><span class="n">derivative</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;log_x&#39;</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">add_legend</span><span class="o">=</span><span class="kc">False</span><span class="p">);</span>

<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Raw Data&quot;</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Derivative of Smoothed Log(Data)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[Text(0.5, 1.0, &#39;Derivative of Smoothed Log(Data)&#39;)]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_building_pipelines_28_1.png" src="../_images/tutorials_building_pipelines_28_1.png" />
</div>
</div>
<p>The data on the right has more flat, constant regions than the data on the left making it easier for the simlarity and clustering analyses below to separate.</p>
</section>
<section id="Step-2:-Calculate-Similarity-between-Measurement-Data">
<h2>Step 2: Calculate Similarity between Measurement Data<a class="headerlink" href="#Step-2:-Calculate-Similarity-between-Measurement-Data" title="Permalink to this heading">#</a></h2>
<p>Now that we have preprocessed our data using the Savgol filter, we can calculate the similarity between different measurements. The <code class="docutils literal notranslate"><span class="pre">Similarity</span></code> component computes a similarity matrix between all pairs of samples based on their filtered derivative data. This similarity matrix will be used as input for clustering in the next step.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">my_first_pipeline</span><span class="p">:</span>
    <span class="n">Similarity</span><span class="p">(</span>
        <span class="n">input_variable</span><span class="o">=</span><span class="s1">&#39;derivative&#39;</span><span class="p">,</span>
        <span class="n">output_variable</span><span class="o">=</span><span class="s1">&#39;similarity&#39;</span><span class="p">,</span>
        <span class="n">sample_dim</span><span class="o">=</span><span class="s1">&#39;sample&#39;</span><span class="p">,</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;metric&#39;</span><span class="p">:</span> <span class="s1">&#39;laplacian&#39;</span><span class="p">,</span><span class="s1">&#39;gamma&#39;</span><span class="p">:</span><span class="mf">1e-4</span><span class="p">}</span>
        <span class="p">)</span>

<span class="n">my_first_pipeline</span><span class="o">.</span><span class="n">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PipelineOp                               input_variable ---&gt; output_variable
----------                               -----------------------------------
0  ) &lt;Standardize&gt;                       composition ---&gt; normalized_composition
1  ) &lt;Standardize&gt;                       composition_grid ---&gt; normalized_composition_grid
2  ) &lt;SavgolFilter&gt;                      measurement ---&gt; derivative
3  ) &lt;SimilarityMetric&gt;                  derivative ---&gt; similarity

Input Variables
---------------
0) composition
1) composition_grid
2) measurement

Output Variables
----------------
0) normalized_composition
1) normalized_composition_grid
2) similarity
</pre></div></div>
</div>
<p>The Similarity component takes the following inputs:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">input_variable</span></code>: The variable to calculate similarity between (‘derivative’)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output_variable</span></code>: The variable to store the similarity matrix (‘similarity’)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sample_dim</span></code>: The dimension containing different samples (‘sample’)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">params</span></code>: Dictionary of parameters for similarity calculation</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">metric</span></code>: The similarity metric to use (‘laplacian’)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gamma</span></code>: The scale parameter for the similarity metric (1e-4)</p></li>
</ul>
</li>
</ul>
<p>Let’s execute the pipeline</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_result</span> <span class="o">=</span> <span class="n">my_first_pipeline</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
<span class="n">ds_result</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "200f79473aba43d68d893247f7564ce2", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1f1f1f;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
  height: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "►";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "▼";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 487kB
Dimensions:                      (sample: 100, component: 2, x: 150,
                                  grid: 2500, log_x: 250, sample_i: 100,
                                  sample_j: 100)
Coordinates:
  * component                    (component) &lt;U1 8B &#x27;A&#x27; &#x27;B&#x27;
  * x                            (x) float64 1kB 0.001 0.001047 ... 0.9547 1.0
  * log_x                        (log_x) float64 2kB -3.0 -2.988 ... 0.0
Dimensions without coordinates: sample, grid, sample_i, sample_j
Data variables:
    composition                  (sample, component) float64 2kB 5.7 ... 5.104
    ground_truth_labels          (sample) int64 800B 1 1 0 1 0 1 ... 1 1 1 0 1 1
    measurement                  (sample, x) float64 120kB 1.915e+06 ... 1.885
    composition_grid             (grid, component) float64 40kB 0.0 0.0 ... 25.0
    normalized_composition       (sample, component) float64 2kB 0.57 ... 0.2042
    normalized_composition_grid  (grid, component) float64 40kB 0.0 0.0 ... 1.0
    derivative                   (sample, log_x) float64 200kB -3.82 ... -0.4063
    similarity                   (sample_i, sample_j) float64 80kB 1.0 ... 1.0</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-78130176-90e6-4d28-a90c-4c09ba01cea1' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-78130176-90e6-4d28-a90c-4c09ba01cea1' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span>sample</span>: 100</li><li><span class='xr-has-index'>component</span>: 2</li><li><span class='xr-has-index'>x</span>: 150</li><li><span>grid</span>: 2500</li><li><span class='xr-has-index'>log_x</span>: 250</li><li><span>sample_i</span>: 100</li><li><span>sample_j</span>: 100</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-11c4bdd4-a1e3-48f0-b5f3-7e3029d2b4cc' class='xr-section-summary-in' type='checkbox'  checked><label for='section-11c4bdd4-a1e3-48f0-b5f3-7e3029d2b4cc' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>component</span></div><div class='xr-var-dims'>(component)</div><div class='xr-var-dtype'>&lt;U1</div><div class='xr-var-preview xr-preview'>&#x27;A&#x27; &#x27;B&#x27;</div><input id='attrs-cccfe538-eb15-423f-b1b2-6b0c5e44e475' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-cccfe538-eb15-423f-b1b2-6b0c5e44e475' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2253c650-8420-4a4a-a773-7663b475a0ff' class='xr-var-data-in' type='checkbox'><label for='data-2253c650-8420-4a4a-a773-7663b475a0ff' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;A&#x27;, &#x27;B&#x27;], dtype=&#x27;&lt;U1&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.001 0.001047 ... 0.9547 1.0</div><input id='attrs-e37c13fe-f128-42b5-9300-7ab292a474ad' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-e37c13fe-f128-42b5-9300-7ab292a474ad' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b6d66ca9-6b2d-4949-8ebb-cb7d49a1b820' class='xr-var-data-in' type='checkbox'><label for='data-b6d66ca9-6b2d-4949-8ebb-cb7d49a1b820' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0.001   , 0.001047, 0.001097, 0.001149, 0.001204, 0.001261, 0.001321,
       0.001383, 0.001449, 0.001518, 0.00159 , 0.001665, 0.001744, 0.001827,
       0.001914, 0.002005, 0.0021  , 0.002199, 0.002304, 0.002413, 0.002527,
       0.002647, 0.002773, 0.002905, 0.003042, 0.003187, 0.003338, 0.003496,
       0.003662, 0.003836, 0.004018, 0.004209, 0.004409, 0.004618, 0.004837,
       0.005066, 0.005307, 0.005559, 0.005822, 0.006099, 0.006388, 0.006691,
       0.007009, 0.007341, 0.00769 , 0.008055, 0.008437, 0.008837, 0.009256,
       0.009696, 0.010156, 0.010638, 0.011142, 0.011671, 0.012225, 0.012805,
       0.013413, 0.014049, 0.014716, 0.015414, 0.016146, 0.016912, 0.017714,
       0.018555, 0.019435, 0.020358, 0.021324, 0.022335, 0.023395, 0.024505,
       0.025668, 0.026886, 0.028162, 0.029498, 0.030898, 0.032364, 0.0339  ,
       0.035509, 0.037194, 0.038959, 0.040807, 0.042744, 0.044772, 0.046897,
       0.049122, 0.051453, 0.053894, 0.056452, 0.059131, 0.061936, 0.064875,
       0.067954, 0.071179, 0.074556, 0.078094, 0.0818  , 0.085681, 0.089747,
       0.094006, 0.098467, 0.103139, 0.108033, 0.11316 , 0.118529, 0.124154,
       0.130045, 0.136216, 0.14268 , 0.14945 , 0.156542, 0.16397 , 0.171751,
       0.179901, 0.188438, 0.197379, 0.206746, 0.216556, 0.226832, 0.237596,
       0.24887 , 0.26068 , 0.27305 , 0.286006, 0.299578, 0.313794, 0.328684,
       0.344281, 0.360618, 0.37773 , 0.395654, 0.414429, 0.434094, 0.454693,
       0.476269, 0.498869, 0.522542, 0.547337, 0.57331 , 0.600514, 0.62901 ,
       0.658858, 0.690122, 0.72287 , 0.757172, 0.793102, 0.830736, 0.870156,
       0.911447, 0.954697, 1.      ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>log_x</span></div><div class='xr-var-dims'>(log_x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-3.0 -2.988 -2.976 ... -0.01205 0.0</div><input id='attrs-6621df25-dca5-4acc-ad70-a3f050e2c6fe' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-6621df25-dca5-4acc-ad70-a3f050e2c6fe' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d41aea6f-c16f-4696-bedd-9c3b4e933d42' class='xr-var-data-in' type='checkbox'><label for='data-d41aea6f-c16f-4696-bedd-9c3b4e933d42' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([-3.      , -2.987952, -2.975904, ..., -0.024096, -0.012048,  0.      ])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-b2c9a927-ed15-413a-8508-aa202b9503f4' class='xr-section-summary-in' type='checkbox'  checked><label for='section-b2c9a927-ed15-413a-8508-aa202b9503f4' class='xr-section-summary' >Data variables: <span>(8)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>composition</span></div><div class='xr-var-dims'>(sample, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>5.7 1.36 8.938 ... 0.478 5.104</div><input id='attrs-87675446-5a0f-42e6-a692-66f16b52bd1b' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-87675446-5a0f-42e6-a692-66f16b52bd1b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6acf9605-7bff-4ebe-a9a8-70a1f75da9c9' class='xr-var-data-in' type='checkbox'><label for='data-6acf9605-7bff-4ebe-a9a8-70a1f75da9c9' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[ 5.69995762,  1.36017531],
       [ 8.93782024, 16.17384162],
       [ 3.77901101, 19.69531938],
       [ 9.82535598,  7.16351158],
       [ 1.60370118, 23.73217969],
       [ 7.90994751, 14.71385158],
       [ 2.17465804,  4.75450299],
       [ 9.30875652,  2.86311327],
       [ 2.78926787,  0.04909185],
       [ 5.0368155 , 17.80655234],
       [ 1.18529693, 16.40857492],
       [ 1.65214034, 19.7760677 ],
       [ 2.73176727,  0.18850408],
       [ 9.22314222,  7.21778243],
       [ 8.33560023,  5.22074632],
       [ 8.10711809, 22.36120136],
       [ 4.10263293,  6.17733076],
       [ 7.94096049, 10.98300725],
       [ 6.58238609, 15.27804755],
       [ 3.78026574, 20.5150357 ],
...
       [ 5.0825235 ,  5.36441059],
       [ 8.50770583,  2.52786027],
       [ 4.46324027,  6.75171924],
       [ 8.52523439,  6.71058719],
       [ 9.23218578, 20.72269505],
       [ 6.7555881 , 10.24855529],
       [ 7.67539066,  1.6795503 ],
       [ 5.8397554 , 10.64947346],
       [ 0.22478436, 18.35236821],
       [ 8.83077635, 10.65541542],
       [ 8.98441453,  0.03322162],
       [ 0.11755953, 11.77699299],
       [ 7.90192605, 18.94690136],
       [ 7.42679234, 23.72441631],
       [ 8.7338296 , 12.27428886],
       [ 2.2094947 ,  9.43848935],
       [ 8.92898549, 10.34927984],
       [ 0.79890552, 16.37383273],
       [ 2.50284147,  0.0800645 ],
       [ 0.47797863,  5.10399908]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ground_truth_labels</span></div><div class='xr-var-dims'>(sample)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1 1 0 1 0 1 1 1 ... 1 1 1 1 1 0 1 1</div><input id='attrs-67dac293-5534-4dba-8a53-e94bc218e92d' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-67dac293-5534-4dba-8a53-e94bc218e92d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4ce48d6a-7c38-4240-b60a-ee4559f45a74' class='xr-var-data-in' type='checkbox'><label for='data-4ce48d6a-7c38-4240-b60a-ee4559f45a74' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1,
       1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
       1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1,
       1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
       0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>measurement</span></div><div class='xr-var-dims'>(sample, x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.915e+06 1.479e+06 ... 1.766 1.885</div><input id='attrs-cbcfd37c-b420-4001-b2ac-44a74d07e196' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-cbcfd37c-b420-4001-b2ac-44a74d07e196' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1c02b89b-5447-4e82-848c-19a06e34ca65' class='xr-var-data-in' type='checkbox'><label for='data-1c02b89b-5447-4e82-848c-19a06e34ca65' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[1.91473866e+06, 1.47945621e+06, 1.36028471e+06, ...,
        1.94187833e+00, 1.95975369e+00, 2.07151476e+00],
       [1.97716281e+06, 1.35648739e+06, 1.63877436e+06, ...,
        1.90008720e+00, 1.76008223e+00, 2.09466497e+00],
       [9.73830160e-01, 7.68956928e-01, 1.03891097e+00, ...,
        9.25128766e-01, 6.82586751e-01, 1.00886636e+00],
       ...,
       [1.42016873e+00, 8.73396019e-01, 1.23904051e+00, ...,
        1.14723090e+00, 1.27145347e+00, 9.40494323e-01],
       [1.96972776e+06, 1.80114117e+06, 1.63801728e+06, ...,
        2.53037078e+00, 1.96144836e+00, 2.37164783e+00],
       [2.34596686e+06, 1.77244286e+06, 1.36862577e+06, ...,
        2.05730051e+00, 1.76616880e+00, 1.88473841e+00]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>composition_grid</span></div><div class='xr-var-dims'>(grid, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.0 0.2041 ... 25.0 10.0 25.0</div><input id='attrs-f2777e15-3ee9-4b7f-bacb-cf86f54bf8e3' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-f2777e15-3ee9-4b7f-bacb-cf86f54bf8e3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b6ce0cb6-588e-4978-9fd1-3430b7949a52' class='xr-var-data-in' type='checkbox'><label for='data-b6ce0cb6-588e-4978-9fd1-3430b7949a52' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[ 0.        ,  0.        ],
       [ 0.20408163,  0.        ],
       [ 0.40816327,  0.        ],
       ...,
       [ 9.59183673, 25.        ],
       [ 9.79591837, 25.        ],
       [10.        , 25.        ]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>normalized_composition</span></div><div class='xr-var-dims'>(sample, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.57 0.05441 ... 0.0478 0.2042</div><input id='attrs-d33c7136-c296-4ec5-92fc-7a44fcd1b9e1' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d33c7136-c296-4ec5-92fc-7a44fcd1b9e1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bfcab7b6-3706-436f-9310-c3b24e841002' class='xr-var-data-in' type='checkbox'><label for='data-bfcab7b6-3706-436f-9310-c3b24e841002' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>description :</span></dt><dd>Data normalized to have range 0 -&gt; 1</dd><dt><span>name :</span></dt><dd>Standardize</dd><dt><span>input_variable :</span></dt><dd>composition</dd><dt><span>output_variable :</span></dt><dd>normalized_composition</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>dim :</span></dt><dd>sample</dd><dt><span>component_dim :</span></dt><dd>component</dd><dt><span>min_val :</span></dt><dd>{&#x27;A&#x27;: 0.0, &#x27;B&#x27;: 0.0}</dd><dt><span>max_val :</span></dt><dd>{&#x27;A&#x27;: 10.0, &#x27;B&#x27;: 25.0}</dd><dt><span>scale_variable :</span></dt><dd>None</dd></dl></div><div class='xr-var-data'><pre>array([[0.56999576, 0.05440701],
       [0.89378202, 0.64695366],
       [0.3779011 , 0.78781278],
       [0.9825356 , 0.28654046],
       [0.16037012, 0.94928719],
       [0.79099475, 0.58855406],
       [0.2174658 , 0.19018012],
       [0.93087565, 0.11452453],
       [0.27892679, 0.00196367],
       [0.50368155, 0.71226209],
       [0.11852969, 0.656343  ],
       [0.16521403, 0.79104271],
       [0.27317673, 0.00754016],
       [0.92231422, 0.2887113 ],
       [0.83356002, 0.20882985],
       [0.81071181, 0.89444805],
       [0.41026329, 0.24709323],
       [0.79409605, 0.43932029],
       [0.65823861, 0.6111219 ],
       [0.37802657, 0.82060143],
...
       [0.50825235, 0.21457642],
       [0.85077058, 0.10111441],
       [0.44632403, 0.27006877],
       [0.85252344, 0.26842349],
       [0.92321858, 0.8289078 ],
       [0.67555881, 0.40994221],
       [0.76753907, 0.06718201],
       [0.58397554, 0.42597894],
       [0.02247844, 0.73409473],
       [0.88307764, 0.42621662],
       [0.89844145, 0.00132886],
       [0.01175595, 0.47107972],
       [0.7901926 , 0.75787605],
       [0.74267923, 0.94897665],
       [0.87338296, 0.49097155],
       [0.22094947, 0.37753957],
       [0.89289855, 0.41397119],
       [0.07989055, 0.65495331],
       [0.25028415, 0.00320258],
       [0.04779786, 0.20415996]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>normalized_composition_grid</span></div><div class='xr-var-dims'>(grid, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.0 0.02041 0.0 ... 1.0 1.0 1.0</div><input id='attrs-653d16a7-171a-4272-ae31-a47fd5d57d64' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-653d16a7-171a-4272-ae31-a47fd5d57d64' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c16274d9-8fec-4ebf-a80a-65b4e86ea3ba' class='xr-var-data-in' type='checkbox'><label for='data-c16274d9-8fec-4ebf-a80a-65b4e86ea3ba' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>description :</span></dt><dd>Data normalized to have range 0 -&gt; 1</dd><dt><span>name :</span></dt><dd>Standardize</dd><dt><span>input_variable :</span></dt><dd>composition_grid</dd><dt><span>output_variable :</span></dt><dd>normalized_composition_grid</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>dim :</span></dt><dd>grid</dd><dt><span>component_dim :</span></dt><dd>component</dd><dt><span>min_val :</span></dt><dd>{&#x27;A&#x27;: 0.0, &#x27;B&#x27;: 0.0}</dd><dt><span>max_val :</span></dt><dd>{&#x27;A&#x27;: 10.0, &#x27;B&#x27;: 25.0}</dd><dt><span>scale_variable :</span></dt><dd>None</dd></dl></div><div class='xr-var-data'><pre>array([[0.        , 0.        ],
       [0.02040816, 0.        ],
       [0.04081633, 0.        ],
       ...,
       [0.95918367, 1.        ],
       [0.97959184, 1.        ],
       [1.        , 1.        ]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>derivative</span></div><div class='xr-var-dims'>(sample, log_x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-3.82 -3.825 ... -0.3897 -0.4063</div><input id='attrs-358055af-872b-415d-8c7e-d2271d8f0f72' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-358055af-872b-415d-8c7e-d2271d8f0f72' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-dcee0c8f-fc25-4cae-a712-3a49ff227c82' class='xr-var-data-in' type='checkbox'><label for='data-dcee0c8f-fc25-4cae-a712-3a49ff227c82' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>description :</span></dt><dd>Savitsky-Golay filtered data</dd><dt><span>name :</span></dt><dd>SavgolFilter</dd><dt><span>input_variable :</span></dt><dd>measurement</dd><dt><span>output_variable :</span></dt><dd>derivative</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>dim :</span></dt><dd>x</dd><dt><span>npts :</span></dt><dd>250</dd><dt><span>xlo :</span></dt><dd>None</dd><dt><span>xhi :</span></dt><dd>None</dd><dt><span>xlo_isel :</span></dt><dd>None</dd><dt><span>xhi_isel :</span></dt><dd>None</dd><dt><span>pedestal :</span></dt><dd>None</dd><dt><span>derivative :</span></dt><dd>1</dd><dt><span>apply_log_scale :</span></dt><dd>True</dd><dt><span>polyorder :</span></dt><dd>2</dd><dt><span>window_length :</span></dt><dd>50</dd></dl></div><div class='xr-var-data'><pre>array([[-3.82019992, -3.82462256, -3.82904519, ..., -0.35145453,
        -0.36993018, -0.38840584],
       [-4.2626048 , -4.24893257, -4.23526033, ...,  0.01349491,
         0.01809932,  0.02270373],
       [ 0.50261177,  0.4760206 ,  0.44942943, ...,  0.12473091,
         0.13576784,  0.14680477],
       ...,
       [-0.24159282, -0.24193045, -0.24226809, ...,  0.52407629,
         0.54400047,  0.56392465],
       [-3.67922195, -3.69182355, -3.70442514, ...,  0.30180559,
         0.31353524,  0.32526489],
       [-3.96638732, -3.97110223, -3.97581713, ..., -0.37305086,
        -0.389679  , -0.40630713]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>similarity</span></div><div class='xr-var-dims'>(sample_i, sample_j)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.0 0.9974 0.9503 ... 0.9974 1.0</div><input id='attrs-4bb7d589-8d9b-4927-b972-a4e2b3899aaf' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-4bb7d589-8d9b-4927-b972-a4e2b3899aaf' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3fabacbd-9a46-4bbc-8fbf-a8abc6b5b997' class='xr-var-data-in' type='checkbox'><label for='data-3fabacbd-9a46-4bbc-8fbf-a8abc6b5b997' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>metric :</span></dt><dd>laplacian</dd><dt><span>gamma :</span></dt><dd>0.0001</dd><dt><span>name :</span></dt><dd>SimilarityMetric</dd><dt><span>input_variable :</span></dt><dd>derivative</dd><dt><span>output_variable :</span></dt><dd>similarity</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>sample_dim :</span></dt><dd>sample</dd><dt><span>constrain_same :</span></dt><dd>[]</dd><dt><span>constrain_different :</span></dt><dd>[]</dd></dl></div><div class='xr-var-data'><pre>array([[1.        , 0.99741833, 0.950302  , ..., 0.95081738, 0.99761626,
        0.99830741],
       [0.99741833, 1.        , 0.95025158, ..., 0.95041344, 0.99752619,
        0.99755674],
       [0.950302  , 0.95025158, 1.        , ..., 0.99504435, 0.9505596 ,
        0.95006123],
       ...,
       [0.95081738, 0.95041344, 0.99504435, ..., 1.        , 0.95158475,
        0.95047502],
       [0.99761626, 0.99752619, 0.9505596 , ..., 0.95158475, 1.        ,
        0.99740548],
       [0.99830741, 0.99755674, 0.95006123, ..., 0.95047502, 0.99740548,
        1.        ]])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-e6c46ffb-915a-4d4e-9d5c-b66581afd114' class='xr-section-summary-in' type='checkbox'  ><label for='section-e6c46ffb-915a-4d4e-9d5c-b66581afd114' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>component</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-543c6dea-75be-4b67-9d48-1160163c63d8' class='xr-index-data-in' type='checkbox'/><label for='index-543c6dea-75be-4b67-9d48-1160163c63d8' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;A&#x27;, &#x27;B&#x27;], dtype=&#x27;object&#x27;, name=&#x27;component&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-906a232d-7c12-42b8-b44c-fe6361aa707a' class='xr-index-data-in' type='checkbox'/><label for='index-906a232d-7c12-42b8-b44c-fe6361aa707a' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([                0.001, 0.0010474522360006332, 0.0010971561867027272,
       0.0011492187010036998, 0.0012037516980200685, 0.0012608724076806808,
        0.001320703622736631, 0.0013833739627296209,  0.001449018150486198,
       0.0015177773017322714,
       ...
          0.6588581861506815,    0.6901224802908528,    0.7228703350949566,
            0.75717214883374,    0.7931016603333051,    0.8307361074919352,
          0.8701563933188907,    0.9114472598521185,    0.9546974703287516,
                         1.0],
      dtype=&#x27;float64&#x27;, name=&#x27;x&#x27;, length=150))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>log_x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-ec2b9970-34fc-4e62-a5e3-65906076baea' class='xr-index-data-in' type='checkbox'/><label for='index-ec2b9970-34fc-4e62-a5e3-65906076baea' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([                 -3.0,   -2.9879518072289155,   -2.9759036144578315,
          -2.963855421686747,   -2.9518072289156625,   -2.9397590361445785,
          -2.927710843373494,   -2.9156626506024095,   -2.9036144578313254,
          -2.891566265060241,
       ...
        -0.10843373493975905,  -0.09638554216867457,  -0.08433734939759008,
        -0.07228915662650603,  -0.06024096385542155,  -0.04819277108433706,
        -0.03614457831325302,  -0.02409638554216853, -0.012048192771084043,
                         0.0],
      dtype=&#x27;float64&#x27;, name=&#x27;log_x&#x27;, length=250))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-3e64b6bc-1a2f-4038-867d-de898388fdc8' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-3e64b6bc-1a2f-4038-867d-de898388fdc8' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<p>We can visualize the similarity matrix.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_result</span><span class="o">.</span><span class="n">similarity</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.collections.QuadMesh at 0x312e02690&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_building_pipelines_36_1.png" src="../_images/tutorials_building_pipelines_36_1.png" />
</div>
</div>
<p>Each pixel indexed by (i,j) in this image corresponds to the similarity between measurement i and j. The bright pixels indicate high similarity and the darker pixels reduced similarity. A check on this calculation is that the diagonal should have a perfect similarity = 1.0 because each data is perfectly self similar to itself, i.e. <code class="docutils literal notranslate"><span class="pre">S(i,i)</span> <span class="pre">=</span> <span class="pre">S(j,j)</span> <span class="pre">=</span> <span class="pre">1.0</span></code></p>
</section>
<section id="Step-3:-Cluster-Measurement-Data-based-on-Similarity">
<h2>Step 3: Cluster Measurement Data based on Similarity<a class="headerlink" href="#Step-3:-Cluster-Measurement-Data-based-on-Similarity" title="Permalink to this heading">#</a></h2>
<p>Now that we can use the similarity matrix to cluster the data into groups.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">my_first_pipeline</span><span class="p">:</span>
    <span class="n">SpectralClustering</span><span class="p">(</span>
        <span class="n">input_variable</span><span class="o">=</span><span class="s1">&#39;similarity&#39;</span><span class="p">,</span>
        <span class="n">output_variable</span><span class="o">=</span><span class="s1">&#39;labels&#39;</span><span class="p">,</span>
        <span class="n">dim</span><span class="o">=</span><span class="s1">&#39;sample&#39;</span><span class="p">,</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;n_phases&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
        <span class="p">)</span>


<span class="n">my_first_pipeline</span><span class="o">.</span><span class="n">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PipelineOp                               input_variable ---&gt; output_variable
----------                               -----------------------------------
0  ) &lt;Standardize&gt;                       composition ---&gt; normalized_composition
1  ) &lt;Standardize&gt;                       composition_grid ---&gt; normalized_composition_grid
2  ) &lt;SavgolFilter&gt;                      measurement ---&gt; derivative
3  ) &lt;SimilarityMetric&gt;                  derivative ---&gt; similarity
4  ) &lt;SpectralClustering&gt;                similarity ---&gt; labels

Input Variables
---------------
0) composition
1) composition_grid
2) measurement

Output Variables
----------------
0) normalized_composition
1) normalized_composition_grid
2) labels
</pre></div></div>
</div>
<p>The SpectralClustering pipeline operation takes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">input_variable</span></code>: The similarity matrix to use for clustering (‘similarity’)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output_variable</span></code>: The variable to store the cluster labels (‘labels’)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dim</span></code>: The dimension containing different samples (‘sample’)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">params</span></code>: Dictionary of parameters for clustering</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">n_phases</span></code>: The number of clusters/phases to find (2)</p></li>
</ul>
</li>
</ul>
<p>Let’s run the pipeline with this new operation</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_result</span> <span class="o">=</span> <span class="n">my_first_pipeline</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
<span class="n">ds_result</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "367c56818d734cee84398ef695190ab9", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1f1f1f;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
  height: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "►";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "▼";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 488kB
Dimensions:                      (sample: 100, component: 2, x: 150,
                                  grid: 2500, log_x: 250, sample_i: 100,
                                  sample_j: 100)
Coordinates:
  * component                    (component) &lt;U1 8B &#x27;A&#x27; &#x27;B&#x27;
  * x                            (x) float64 1kB 0.001 0.001047 ... 0.9547 1.0
  * log_x                        (log_x) float64 2kB -3.0 -2.988 ... 0.0
Dimensions without coordinates: sample, grid, sample_i, sample_j
Data variables:
    composition                  (sample, component) float64 2kB 5.7 ... 5.104
    ground_truth_labels          (sample) int64 800B 1 1 0 1 0 1 ... 1 1 1 0 1 1
    measurement                  (sample, x) float64 120kB 1.915e+06 ... 1.885
    composition_grid             (grid, component) float64 40kB 0.0 0.0 ... 25.0
    normalized_composition       (sample, component) float64 2kB 0.57 ... 0.2042
    normalized_composition_grid  (grid, component) float64 40kB 0.0 0.0 ... 1.0
    derivative                   (sample, log_x) float64 200kB -3.82 ... -0.4063
    similarity                   (sample_i, sample_j) float64 80kB 1.0 ... 1.0
    labels                       (sample) int64 800B 1 1 0 1 0 1 ... 1 1 1 0 1 1</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-3f1a767a-2435-46d4-873d-23174a1b2b8f' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-3f1a767a-2435-46d4-873d-23174a1b2b8f' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span>sample</span>: 100</li><li><span class='xr-has-index'>component</span>: 2</li><li><span class='xr-has-index'>x</span>: 150</li><li><span>grid</span>: 2500</li><li><span class='xr-has-index'>log_x</span>: 250</li><li><span>sample_i</span>: 100</li><li><span>sample_j</span>: 100</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-78a5bbf7-b45d-421c-a251-433f77c6fcd7' class='xr-section-summary-in' type='checkbox'  checked><label for='section-78a5bbf7-b45d-421c-a251-433f77c6fcd7' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>component</span></div><div class='xr-var-dims'>(component)</div><div class='xr-var-dtype'>&lt;U1</div><div class='xr-var-preview xr-preview'>&#x27;A&#x27; &#x27;B&#x27;</div><input id='attrs-bb51e9d1-5a02-4a9a-a2fb-9bfce08a3a64' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-bb51e9d1-5a02-4a9a-a2fb-9bfce08a3a64' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f6152815-3adb-4075-8cca-b0b85dcf02eb' class='xr-var-data-in' type='checkbox'><label for='data-f6152815-3adb-4075-8cca-b0b85dcf02eb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;A&#x27;, &#x27;B&#x27;], dtype=&#x27;&lt;U1&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.001 0.001047 ... 0.9547 1.0</div><input id='attrs-a4905185-5ef6-4fe3-aed9-8dd122dd9361' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-a4905185-5ef6-4fe3-aed9-8dd122dd9361' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-cffeae10-71fe-4361-96f8-4c51a04da457' class='xr-var-data-in' type='checkbox'><label for='data-cffeae10-71fe-4361-96f8-4c51a04da457' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0.001   , 0.001047, 0.001097, 0.001149, 0.001204, 0.001261, 0.001321,
       0.001383, 0.001449, 0.001518, 0.00159 , 0.001665, 0.001744, 0.001827,
       0.001914, 0.002005, 0.0021  , 0.002199, 0.002304, 0.002413, 0.002527,
       0.002647, 0.002773, 0.002905, 0.003042, 0.003187, 0.003338, 0.003496,
       0.003662, 0.003836, 0.004018, 0.004209, 0.004409, 0.004618, 0.004837,
       0.005066, 0.005307, 0.005559, 0.005822, 0.006099, 0.006388, 0.006691,
       0.007009, 0.007341, 0.00769 , 0.008055, 0.008437, 0.008837, 0.009256,
       0.009696, 0.010156, 0.010638, 0.011142, 0.011671, 0.012225, 0.012805,
       0.013413, 0.014049, 0.014716, 0.015414, 0.016146, 0.016912, 0.017714,
       0.018555, 0.019435, 0.020358, 0.021324, 0.022335, 0.023395, 0.024505,
       0.025668, 0.026886, 0.028162, 0.029498, 0.030898, 0.032364, 0.0339  ,
       0.035509, 0.037194, 0.038959, 0.040807, 0.042744, 0.044772, 0.046897,
       0.049122, 0.051453, 0.053894, 0.056452, 0.059131, 0.061936, 0.064875,
       0.067954, 0.071179, 0.074556, 0.078094, 0.0818  , 0.085681, 0.089747,
       0.094006, 0.098467, 0.103139, 0.108033, 0.11316 , 0.118529, 0.124154,
       0.130045, 0.136216, 0.14268 , 0.14945 , 0.156542, 0.16397 , 0.171751,
       0.179901, 0.188438, 0.197379, 0.206746, 0.216556, 0.226832, 0.237596,
       0.24887 , 0.26068 , 0.27305 , 0.286006, 0.299578, 0.313794, 0.328684,
       0.344281, 0.360618, 0.37773 , 0.395654, 0.414429, 0.434094, 0.454693,
       0.476269, 0.498869, 0.522542, 0.547337, 0.57331 , 0.600514, 0.62901 ,
       0.658858, 0.690122, 0.72287 , 0.757172, 0.793102, 0.830736, 0.870156,
       0.911447, 0.954697, 1.      ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>log_x</span></div><div class='xr-var-dims'>(log_x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-3.0 -2.988 -2.976 ... -0.01205 0.0</div><input id='attrs-e29664b0-5ffe-43b4-959e-7295f4c4ab5f' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-e29664b0-5ffe-43b4-959e-7295f4c4ab5f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5c46e57a-f69e-4e2d-b500-fa623d50e5cf' class='xr-var-data-in' type='checkbox'><label for='data-5c46e57a-f69e-4e2d-b500-fa623d50e5cf' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([-3.      , -2.987952, -2.975904, ..., -0.024096, -0.012048,  0.      ])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-cd88feb2-6f94-4fcb-9146-cc38d1f21006' class='xr-section-summary-in' type='checkbox'  checked><label for='section-cd88feb2-6f94-4fcb-9146-cc38d1f21006' class='xr-section-summary' >Data variables: <span>(9)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>composition</span></div><div class='xr-var-dims'>(sample, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>5.7 1.36 8.938 ... 0.478 5.104</div><input id='attrs-c3767014-de55-4f64-9df5-0298cbc8a815' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-c3767014-de55-4f64-9df5-0298cbc8a815' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b0fac27d-473e-419a-b6f7-5fd625aa5621' class='xr-var-data-in' type='checkbox'><label for='data-b0fac27d-473e-419a-b6f7-5fd625aa5621' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[ 5.69995762,  1.36017531],
       [ 8.93782024, 16.17384162],
       [ 3.77901101, 19.69531938],
       [ 9.82535598,  7.16351158],
       [ 1.60370118, 23.73217969],
       [ 7.90994751, 14.71385158],
       [ 2.17465804,  4.75450299],
       [ 9.30875652,  2.86311327],
       [ 2.78926787,  0.04909185],
       [ 5.0368155 , 17.80655234],
       [ 1.18529693, 16.40857492],
       [ 1.65214034, 19.7760677 ],
       [ 2.73176727,  0.18850408],
       [ 9.22314222,  7.21778243],
       [ 8.33560023,  5.22074632],
       [ 8.10711809, 22.36120136],
       [ 4.10263293,  6.17733076],
       [ 7.94096049, 10.98300725],
       [ 6.58238609, 15.27804755],
       [ 3.78026574, 20.5150357 ],
...
       [ 5.0825235 ,  5.36441059],
       [ 8.50770583,  2.52786027],
       [ 4.46324027,  6.75171924],
       [ 8.52523439,  6.71058719],
       [ 9.23218578, 20.72269505],
       [ 6.7555881 , 10.24855529],
       [ 7.67539066,  1.6795503 ],
       [ 5.8397554 , 10.64947346],
       [ 0.22478436, 18.35236821],
       [ 8.83077635, 10.65541542],
       [ 8.98441453,  0.03322162],
       [ 0.11755953, 11.77699299],
       [ 7.90192605, 18.94690136],
       [ 7.42679234, 23.72441631],
       [ 8.7338296 , 12.27428886],
       [ 2.2094947 ,  9.43848935],
       [ 8.92898549, 10.34927984],
       [ 0.79890552, 16.37383273],
       [ 2.50284147,  0.0800645 ],
       [ 0.47797863,  5.10399908]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ground_truth_labels</span></div><div class='xr-var-dims'>(sample)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1 1 0 1 0 1 1 1 ... 1 1 1 1 1 0 1 1</div><input id='attrs-8e3aae26-6fde-42ca-9b61-db54ceca09c2' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-8e3aae26-6fde-42ca-9b61-db54ceca09c2' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1b8f760d-cd15-41b6-ac16-66e54a54867d' class='xr-var-data-in' type='checkbox'><label for='data-1b8f760d-cd15-41b6-ac16-66e54a54867d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1,
       1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
       1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1,
       1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
       0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>measurement</span></div><div class='xr-var-dims'>(sample, x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.915e+06 1.479e+06 ... 1.766 1.885</div><input id='attrs-079839fa-38e2-49b0-8d15-abd15b8365e9' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-079839fa-38e2-49b0-8d15-abd15b8365e9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-fa1b3836-e4f0-42e6-8199-fb3736b27176' class='xr-var-data-in' type='checkbox'><label for='data-fa1b3836-e4f0-42e6-8199-fb3736b27176' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[1.91473866e+06, 1.47945621e+06, 1.36028471e+06, ...,
        1.94187833e+00, 1.95975369e+00, 2.07151476e+00],
       [1.97716281e+06, 1.35648739e+06, 1.63877436e+06, ...,
        1.90008720e+00, 1.76008223e+00, 2.09466497e+00],
       [9.73830160e-01, 7.68956928e-01, 1.03891097e+00, ...,
        9.25128766e-01, 6.82586751e-01, 1.00886636e+00],
       ...,
       [1.42016873e+00, 8.73396019e-01, 1.23904051e+00, ...,
        1.14723090e+00, 1.27145347e+00, 9.40494323e-01],
       [1.96972776e+06, 1.80114117e+06, 1.63801728e+06, ...,
        2.53037078e+00, 1.96144836e+00, 2.37164783e+00],
       [2.34596686e+06, 1.77244286e+06, 1.36862577e+06, ...,
        2.05730051e+00, 1.76616880e+00, 1.88473841e+00]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>composition_grid</span></div><div class='xr-var-dims'>(grid, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.0 0.2041 ... 25.0 10.0 25.0</div><input id='attrs-b6eeb184-12a6-4c4e-9216-2f9afc2f4cf9' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b6eeb184-12a6-4c4e-9216-2f9afc2f4cf9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5320d9b5-f8ab-4aed-902d-9f7808dbd1f0' class='xr-var-data-in' type='checkbox'><label for='data-5320d9b5-f8ab-4aed-902d-9f7808dbd1f0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[ 0.        ,  0.        ],
       [ 0.20408163,  0.        ],
       [ 0.40816327,  0.        ],
       ...,
       [ 9.59183673, 25.        ],
       [ 9.79591837, 25.        ],
       [10.        , 25.        ]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>normalized_composition</span></div><div class='xr-var-dims'>(sample, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.57 0.05441 ... 0.0478 0.2042</div><input id='attrs-7934eb4a-18db-49fb-aaff-f926c9034168' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7934eb4a-18db-49fb-aaff-f926c9034168' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6cb83f04-0919-44ff-b688-54a66ddf74d1' class='xr-var-data-in' type='checkbox'><label for='data-6cb83f04-0919-44ff-b688-54a66ddf74d1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>description :</span></dt><dd>Data normalized to have range 0 -&gt; 1</dd><dt><span>name :</span></dt><dd>Standardize</dd><dt><span>input_variable :</span></dt><dd>composition</dd><dt><span>output_variable :</span></dt><dd>normalized_composition</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>dim :</span></dt><dd>sample</dd><dt><span>component_dim :</span></dt><dd>component</dd><dt><span>min_val :</span></dt><dd>{&#x27;A&#x27;: 0.0, &#x27;B&#x27;: 0.0}</dd><dt><span>max_val :</span></dt><dd>{&#x27;A&#x27;: 10.0, &#x27;B&#x27;: 25.0}</dd><dt><span>scale_variable :</span></dt><dd>None</dd></dl></div><div class='xr-var-data'><pre>array([[0.56999576, 0.05440701],
       [0.89378202, 0.64695366],
       [0.3779011 , 0.78781278],
       [0.9825356 , 0.28654046],
       [0.16037012, 0.94928719],
       [0.79099475, 0.58855406],
       [0.2174658 , 0.19018012],
       [0.93087565, 0.11452453],
       [0.27892679, 0.00196367],
       [0.50368155, 0.71226209],
       [0.11852969, 0.656343  ],
       [0.16521403, 0.79104271],
       [0.27317673, 0.00754016],
       [0.92231422, 0.2887113 ],
       [0.83356002, 0.20882985],
       [0.81071181, 0.89444805],
       [0.41026329, 0.24709323],
       [0.79409605, 0.43932029],
       [0.65823861, 0.6111219 ],
       [0.37802657, 0.82060143],
...
       [0.50825235, 0.21457642],
       [0.85077058, 0.10111441],
       [0.44632403, 0.27006877],
       [0.85252344, 0.26842349],
       [0.92321858, 0.8289078 ],
       [0.67555881, 0.40994221],
       [0.76753907, 0.06718201],
       [0.58397554, 0.42597894],
       [0.02247844, 0.73409473],
       [0.88307764, 0.42621662],
       [0.89844145, 0.00132886],
       [0.01175595, 0.47107972],
       [0.7901926 , 0.75787605],
       [0.74267923, 0.94897665],
       [0.87338296, 0.49097155],
       [0.22094947, 0.37753957],
       [0.89289855, 0.41397119],
       [0.07989055, 0.65495331],
       [0.25028415, 0.00320258],
       [0.04779786, 0.20415996]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>normalized_composition_grid</span></div><div class='xr-var-dims'>(grid, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.0 0.02041 0.0 ... 1.0 1.0 1.0</div><input id='attrs-3ae1abee-b304-4a64-87d9-7fd5a986bd8c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-3ae1abee-b304-4a64-87d9-7fd5a986bd8c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ca9e44c8-99a8-47bf-877f-e712e9401853' class='xr-var-data-in' type='checkbox'><label for='data-ca9e44c8-99a8-47bf-877f-e712e9401853' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>description :</span></dt><dd>Data normalized to have range 0 -&gt; 1</dd><dt><span>name :</span></dt><dd>Standardize</dd><dt><span>input_variable :</span></dt><dd>composition_grid</dd><dt><span>output_variable :</span></dt><dd>normalized_composition_grid</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>dim :</span></dt><dd>grid</dd><dt><span>component_dim :</span></dt><dd>component</dd><dt><span>min_val :</span></dt><dd>{&#x27;A&#x27;: 0.0, &#x27;B&#x27;: 0.0}</dd><dt><span>max_val :</span></dt><dd>{&#x27;A&#x27;: 10.0, &#x27;B&#x27;: 25.0}</dd><dt><span>scale_variable :</span></dt><dd>None</dd></dl></div><div class='xr-var-data'><pre>array([[0.        , 0.        ],
       [0.02040816, 0.        ],
       [0.04081633, 0.        ],
       ...,
       [0.95918367, 1.        ],
       [0.97959184, 1.        ],
       [1.        , 1.        ]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>derivative</span></div><div class='xr-var-dims'>(sample, log_x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-3.82 -3.825 ... -0.3897 -0.4063</div><input id='attrs-91ed0b87-7122-4230-b223-5f6929a7b8f3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-91ed0b87-7122-4230-b223-5f6929a7b8f3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2b96d340-b2e1-45f9-8ad9-393ca3d640b0' class='xr-var-data-in' type='checkbox'><label for='data-2b96d340-b2e1-45f9-8ad9-393ca3d640b0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>description :</span></dt><dd>Savitsky-Golay filtered data</dd><dt><span>name :</span></dt><dd>SavgolFilter</dd><dt><span>input_variable :</span></dt><dd>measurement</dd><dt><span>output_variable :</span></dt><dd>derivative</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>dim :</span></dt><dd>x</dd><dt><span>npts :</span></dt><dd>250</dd><dt><span>xlo :</span></dt><dd>None</dd><dt><span>xhi :</span></dt><dd>None</dd><dt><span>xlo_isel :</span></dt><dd>None</dd><dt><span>xhi_isel :</span></dt><dd>None</dd><dt><span>pedestal :</span></dt><dd>None</dd><dt><span>derivative :</span></dt><dd>1</dd><dt><span>apply_log_scale :</span></dt><dd>True</dd><dt><span>polyorder :</span></dt><dd>2</dd><dt><span>window_length :</span></dt><dd>50</dd></dl></div><div class='xr-var-data'><pre>array([[-3.82019992, -3.82462256, -3.82904519, ..., -0.35145453,
        -0.36993018, -0.38840584],
       [-4.2626048 , -4.24893257, -4.23526033, ...,  0.01349491,
         0.01809932,  0.02270373],
       [ 0.50261177,  0.4760206 ,  0.44942943, ...,  0.12473091,
         0.13576784,  0.14680477],
       ...,
       [-0.24159282, -0.24193045, -0.24226809, ...,  0.52407629,
         0.54400047,  0.56392465],
       [-3.67922195, -3.69182355, -3.70442514, ...,  0.30180559,
         0.31353524,  0.32526489],
       [-3.96638732, -3.97110223, -3.97581713, ..., -0.37305086,
        -0.389679  , -0.40630713]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>similarity</span></div><div class='xr-var-dims'>(sample_i, sample_j)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.0 0.9974 0.9503 ... 0.9974 1.0</div><input id='attrs-1bedc93f-b684-4d1c-94e9-684f6d2881ef' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-1bedc93f-b684-4d1c-94e9-684f6d2881ef' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ec8e91a7-e260-4a7f-91a3-184710f9bc0d' class='xr-var-data-in' type='checkbox'><label for='data-ec8e91a7-e260-4a7f-91a3-184710f9bc0d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>metric :</span></dt><dd>laplacian</dd><dt><span>gamma :</span></dt><dd>0.0001</dd><dt><span>name :</span></dt><dd>SimilarityMetric</dd><dt><span>input_variable :</span></dt><dd>derivative</dd><dt><span>output_variable :</span></dt><dd>similarity</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>sample_dim :</span></dt><dd>sample</dd><dt><span>constrain_same :</span></dt><dd>[]</dd><dt><span>constrain_different :</span></dt><dd>[]</dd></dl></div><div class='xr-var-data'><pre>array([[1.        , 0.99741833, 0.950302  , ..., 0.95081738, 0.99761626,
        0.99830741],
       [0.99741833, 1.        , 0.95025158, ..., 0.95041344, 0.99752619,
        0.99755674],
       [0.950302  , 0.95025158, 1.        , ..., 0.99504435, 0.9505596 ,
        0.95006123],
       ...,
       [0.95081738, 0.95041344, 0.99504435, ..., 1.        , 0.95158475,
        0.95047502],
       [0.99761626, 0.99752619, 0.9505596 , ..., 0.95158475, 1.        ,
        0.99740548],
       [0.99830741, 0.99755674, 0.95006123, ..., 0.95047502, 0.99740548,
        1.        ]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>labels</span></div><div class='xr-var-dims'>(sample)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1 1 0 1 0 1 1 1 ... 1 1 1 1 1 0 1 1</div><input id='attrs-9074e5f8-c739-4fe8-b70c-d102ca6dc732' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9074e5f8-c739-4fe8-b70c-d102ca6dc732' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a2867a26-a65b-4d1e-b44a-be7794ad3533' class='xr-var-data-in' type='checkbox'><label for='data-a2867a26-a65b-4d1e-b44a-be7794ad3533' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>n_phases :</span></dt><dd>2</dd><dt><span>name :</span></dt><dd>SpectralClustering</dd><dt><span>input_variable :</span></dt><dd>similarity</dd><dt><span>output_variable :</span></dt><dd>labels</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>dim :</span></dt><dd>sample</dd><dt><span>use_silhouette :</span></dt><dd>False</dd></dl></div><div class='xr-var-data'><pre>array([1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1,
       1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
       1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1,
       1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
       0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-33519a9c-1c86-4b8b-966b-002627fcd213' class='xr-section-summary-in' type='checkbox'  ><label for='section-33519a9c-1c86-4b8b-966b-002627fcd213' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>component</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-1a83af3a-26c7-4b1e-933d-0b0216bc7490' class='xr-index-data-in' type='checkbox'/><label for='index-1a83af3a-26c7-4b1e-933d-0b0216bc7490' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;A&#x27;, &#x27;B&#x27;], dtype=&#x27;object&#x27;, name=&#x27;component&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-da1ec12e-719e-4f55-b5d2-c512abd6433f' class='xr-index-data-in' type='checkbox'/><label for='index-da1ec12e-719e-4f55-b5d2-c512abd6433f' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([                0.001, 0.0010474522360006332, 0.0010971561867027272,
       0.0011492187010036998, 0.0012037516980200685, 0.0012608724076806808,
        0.001320703622736631, 0.0013833739627296209,  0.001449018150486198,
       0.0015177773017322714,
       ...
          0.6588581861506815,    0.6901224802908528,    0.7228703350949566,
            0.75717214883374,    0.7931016603333051,    0.8307361074919352,
          0.8701563933188907,    0.9114472598521185,    0.9546974703287516,
                         1.0],
      dtype=&#x27;float64&#x27;, name=&#x27;x&#x27;, length=150))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>log_x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-cc82e042-d1aa-4eaf-9c47-1d443bccd963' class='xr-index-data-in' type='checkbox'/><label for='index-cc82e042-d1aa-4eaf-9c47-1d443bccd963' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([                 -3.0,   -2.9879518072289155,   -2.9759036144578315,
          -2.963855421686747,   -2.9518072289156625,   -2.9397590361445785,
          -2.927710843373494,   -2.9156626506024095,   -2.9036144578313254,
          -2.891566265060241,
       ...
        -0.10843373493975905,  -0.09638554216867457,  -0.08433734939759008,
        -0.07228915662650603,  -0.06024096385542155,  -0.04819277108433706,
        -0.03614457831325302,  -0.02409638554216853, -0.012048192771084043,
                         0.0],
      dtype=&#x27;float64&#x27;, name=&#x27;log_x&#x27;, length=250))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-b7075364-1ee6-4596-9822-f46c98d64630' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-b7075364-1ee6-4596-9822-f46c98d64630' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<p>Plotting the results of this labeling and comparing to the ground truth</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="n">fig</span><span class="p">,</span><span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mf">3.25</span><span class="p">))</span>

<span class="n">plot_scatter_mpl</span><span class="p">(</span><span class="n">ds_result</span><span class="p">,</span><span class="s1">&#39;composition&#39;</span><span class="p">,</span><span class="n">component_dim</span><span class="o">=</span><span class="s1">&#39;component&#39;</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="s1">&#39;ground_truth_labels&#39;</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">plot_scatter_mpl</span><span class="p">(</span><span class="n">ds_result</span><span class="p">,</span><span class="s1">&#39;composition&#39;</span><span class="p">,</span><span class="n">component_dim</span><span class="o">=</span><span class="s1">&#39;component&#39;</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="s1">&#39;labels&#39;</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Ground Truth Labels&quot;</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Spectral Clustering Labels&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[Text(0.5, 1.0, &#39;Spectral Clustering Labels&#39;)]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_building_pipelines_44_1.png" src="../_images/tutorials_building_pipelines_44_1.png" />
</div>
</div>
</section>
<section id="Step-4:-Extrapolate-Cluster-Labels">
<h2>Step 4: Extrapolate Cluster Labels<a class="headerlink" href="#Step-4:-Extrapolate-Cluster-Labels" title="Permalink to this heading">#</a></h2>
<p>Now we can extrapolate the labels from the <code class="docutils literal notranslate"><span class="pre">SpectralClustering</span></code> over the <code class="docutils literal notranslate"><span class="pre">composition_grid</span></code> that we supplied in the input dataset.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">my_first_pipeline</span><span class="p">:</span>
    <span class="n">GaussianProcessClassifier</span><span class="p">(</span>
        <span class="n">feature_input_variable</span><span class="o">=</span><span class="s1">&#39;normalized_composition&#39;</span><span class="p">,</span>
        <span class="n">predictor_input_variable</span><span class="o">=</span><span class="s1">&#39;labels&#39;</span><span class="p">,</span>
        <span class="n">output_prefix</span><span class="o">=</span><span class="s1">&#39;extrap&#39;</span><span class="p">,</span>
        <span class="n">sample_dim</span><span class="o">=</span><span class="s1">&#39;sample&#39;</span><span class="p">,</span>
        <span class="n">grid_variable</span><span class="o">=</span><span class="s1">&#39;normalized_composition_grid&#39;</span><span class="p">,</span>
        <span class="n">grid_dim</span><span class="o">=</span><span class="s1">&#39;grid&#39;</span><span class="p">,</span>
    <span class="p">)</span>
<span class="n">my_first_pipeline</span><span class="o">.</span><span class="n">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PipelineOp                               input_variable ---&gt; output_variable
----------                               -----------------------------------
0  ) &lt;Standardize&gt;                       composition ---&gt; normalized_composition
1  ) &lt;Standardize&gt;                       composition_grid ---&gt; normalized_composition_grid
2  ) &lt;SavgolFilter&gt;                      measurement ---&gt; derivative
3  ) &lt;SimilarityMetric&gt;                  derivative ---&gt; similarity
4  ) &lt;SpectralClustering&gt;                similarity ---&gt; labels
5  ) &lt;GaussianProcessClassifier&gt;         [&#39;normalized_composition&#39;, &#39;labels&#39;, &#39;normalized_composition_grid&#39;] ---&gt; [&#39;extrap_mean&#39;, &#39;extrap_entropy&#39;]

Input Variables
---------------
0) composition
1) composition_grid
2) measurement

Output Variables
----------------
0) extrap_mean
1) extrap_entropy
</pre></div></div>
</div>
<p>The GaussianProcessClassifier pipeline operation takes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">feature_input_variable</span></code>: The composition data to use for training (‘compositions’)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">predictor_input_variable</span></code>: The labels to predict (‘labels’)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output_prefix</span></code>: Prefix for output variables (‘extrap’)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sample_dim</span></code>: The dimension containing different samples (‘sample’)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grid_variable</span></code>: The grid points to extrapolate to (‘composition_grid’)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grid_dim</span></code>: The dimension containing grid points (‘grid’)</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_result</span> <span class="o">=</span> <span class="n">my_first_pipeline</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
<span class="n">ds_result</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "1ef66176cd6e4558b64fb54bc8317da1", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1f1f1f;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
  height: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "►";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "▼";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 548kB
Dimensions:                      (sample: 100, component: 2, x: 150,
                                  grid: 2500, log_x: 250, sample_i: 100,
                                  sample_j: 100)
Coordinates:
  * component                    (component) &lt;U1 8B &#x27;A&#x27; &#x27;B&#x27;
  * x                            (x) float64 1kB 0.001 0.001047 ... 0.9547 1.0
  * log_x                        (log_x) float64 2kB -3.0 -2.988 ... 0.0
Dimensions without coordinates: sample, grid, sample_i, sample_j
Data variables:
    composition                  (sample, component) float64 2kB 5.7 ... 5.104
    ground_truth_labels          (sample) int64 800B 1 1 0 1 0 1 ... 1 1 1 0 1 1
    measurement                  (sample, x) float64 120kB 1.915e+06 ... 1.885
    composition_grid             (grid, component) float64 40kB 0.0 0.0 ... 25.0
    normalized_composition       (sample, component) float64 2kB 0.57 ... 0.2042
    normalized_composition_grid  (grid, component) float64 40kB 0.0 0.0 ... 1.0
    derivative                   (sample, log_x) float64 200kB -3.82 ... -0.4063
    similarity                   (sample_i, sample_j) float64 80kB 1.0 ... 1.0
    labels                       (sample) int64 800B 1 1 0 1 0 1 ... 1 1 1 0 1 1
    extrap_mean                  (grid) int64 20kB 1 1 1 1 1 1 1 ... 1 1 1 1 1 1
    extrap_entropy               (grid) float64 20kB 0.5813 0.5687 ... 0.4603
    extrap_y_prob                (grid) float64 20kB 0.5813 0.5687 ... 0.4603</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-8dd36646-3b1a-4fa5-96fe-fd9a81be8634' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-8dd36646-3b1a-4fa5-96fe-fd9a81be8634' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span>sample</span>: 100</li><li><span class='xr-has-index'>component</span>: 2</li><li><span class='xr-has-index'>x</span>: 150</li><li><span>grid</span>: 2500</li><li><span class='xr-has-index'>log_x</span>: 250</li><li><span>sample_i</span>: 100</li><li><span>sample_j</span>: 100</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-08a1d322-6429-41ab-9ea8-13cc1edb70a4' class='xr-section-summary-in' type='checkbox'  checked><label for='section-08a1d322-6429-41ab-9ea8-13cc1edb70a4' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>component</span></div><div class='xr-var-dims'>(component)</div><div class='xr-var-dtype'>&lt;U1</div><div class='xr-var-preview xr-preview'>&#x27;A&#x27; &#x27;B&#x27;</div><input id='attrs-33a54c04-9ba9-426d-8895-ebed2559f820' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-33a54c04-9ba9-426d-8895-ebed2559f820' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1f7f9118-db19-4daa-9dd0-476982afac2d' class='xr-var-data-in' type='checkbox'><label for='data-1f7f9118-db19-4daa-9dd0-476982afac2d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;A&#x27;, &#x27;B&#x27;], dtype=&#x27;&lt;U1&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.001 0.001047 ... 0.9547 1.0</div><input id='attrs-5eb72ca3-2702-4d4a-9e2e-852b1bd979fa' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-5eb72ca3-2702-4d4a-9e2e-852b1bd979fa' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-45da2f77-f277-4904-8a88-a146b4108735' class='xr-var-data-in' type='checkbox'><label for='data-45da2f77-f277-4904-8a88-a146b4108735' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0.001   , 0.001047, 0.001097, 0.001149, 0.001204, 0.001261, 0.001321,
       0.001383, 0.001449, 0.001518, 0.00159 , 0.001665, 0.001744, 0.001827,
       0.001914, 0.002005, 0.0021  , 0.002199, 0.002304, 0.002413, 0.002527,
       0.002647, 0.002773, 0.002905, 0.003042, 0.003187, 0.003338, 0.003496,
       0.003662, 0.003836, 0.004018, 0.004209, 0.004409, 0.004618, 0.004837,
       0.005066, 0.005307, 0.005559, 0.005822, 0.006099, 0.006388, 0.006691,
       0.007009, 0.007341, 0.00769 , 0.008055, 0.008437, 0.008837, 0.009256,
       0.009696, 0.010156, 0.010638, 0.011142, 0.011671, 0.012225, 0.012805,
       0.013413, 0.014049, 0.014716, 0.015414, 0.016146, 0.016912, 0.017714,
       0.018555, 0.019435, 0.020358, 0.021324, 0.022335, 0.023395, 0.024505,
       0.025668, 0.026886, 0.028162, 0.029498, 0.030898, 0.032364, 0.0339  ,
       0.035509, 0.037194, 0.038959, 0.040807, 0.042744, 0.044772, 0.046897,
       0.049122, 0.051453, 0.053894, 0.056452, 0.059131, 0.061936, 0.064875,
       0.067954, 0.071179, 0.074556, 0.078094, 0.0818  , 0.085681, 0.089747,
       0.094006, 0.098467, 0.103139, 0.108033, 0.11316 , 0.118529, 0.124154,
       0.130045, 0.136216, 0.14268 , 0.14945 , 0.156542, 0.16397 , 0.171751,
       0.179901, 0.188438, 0.197379, 0.206746, 0.216556, 0.226832, 0.237596,
       0.24887 , 0.26068 , 0.27305 , 0.286006, 0.299578, 0.313794, 0.328684,
       0.344281, 0.360618, 0.37773 , 0.395654, 0.414429, 0.434094, 0.454693,
       0.476269, 0.498869, 0.522542, 0.547337, 0.57331 , 0.600514, 0.62901 ,
       0.658858, 0.690122, 0.72287 , 0.757172, 0.793102, 0.830736, 0.870156,
       0.911447, 0.954697, 1.      ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>log_x</span></div><div class='xr-var-dims'>(log_x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-3.0 -2.988 -2.976 ... -0.01205 0.0</div><input id='attrs-6c7659f5-e904-472f-bdd4-5498e9c3eda3' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-6c7659f5-e904-472f-bdd4-5498e9c3eda3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c606357e-ea82-4a33-aeeb-edb74d52022e' class='xr-var-data-in' type='checkbox'><label for='data-c606357e-ea82-4a33-aeeb-edb74d52022e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([-3.      , -2.987952, -2.975904, ..., -0.024096, -0.012048,  0.      ])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-ef9ac8cb-9932-4b2d-b604-5d6f57b1ea15' class='xr-section-summary-in' type='checkbox'  checked><label for='section-ef9ac8cb-9932-4b2d-b604-5d6f57b1ea15' class='xr-section-summary' >Data variables: <span>(12)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>composition</span></div><div class='xr-var-dims'>(sample, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>5.7 1.36 8.938 ... 0.478 5.104</div><input id='attrs-19f81080-e278-4146-a399-7861e9418044' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-19f81080-e278-4146-a399-7861e9418044' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1790c52e-5f58-4f76-96a3-93c05a44e262' class='xr-var-data-in' type='checkbox'><label for='data-1790c52e-5f58-4f76-96a3-93c05a44e262' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[ 5.69995762,  1.36017531],
       [ 8.93782024, 16.17384162],
       [ 3.77901101, 19.69531938],
       [ 9.82535598,  7.16351158],
       [ 1.60370118, 23.73217969],
       [ 7.90994751, 14.71385158],
       [ 2.17465804,  4.75450299],
       [ 9.30875652,  2.86311327],
       [ 2.78926787,  0.04909185],
       [ 5.0368155 , 17.80655234],
       [ 1.18529693, 16.40857492],
       [ 1.65214034, 19.7760677 ],
       [ 2.73176727,  0.18850408],
       [ 9.22314222,  7.21778243],
       [ 8.33560023,  5.22074632],
       [ 8.10711809, 22.36120136],
       [ 4.10263293,  6.17733076],
       [ 7.94096049, 10.98300725],
       [ 6.58238609, 15.27804755],
       [ 3.78026574, 20.5150357 ],
...
       [ 5.0825235 ,  5.36441059],
       [ 8.50770583,  2.52786027],
       [ 4.46324027,  6.75171924],
       [ 8.52523439,  6.71058719],
       [ 9.23218578, 20.72269505],
       [ 6.7555881 , 10.24855529],
       [ 7.67539066,  1.6795503 ],
       [ 5.8397554 , 10.64947346],
       [ 0.22478436, 18.35236821],
       [ 8.83077635, 10.65541542],
       [ 8.98441453,  0.03322162],
       [ 0.11755953, 11.77699299],
       [ 7.90192605, 18.94690136],
       [ 7.42679234, 23.72441631],
       [ 8.7338296 , 12.27428886],
       [ 2.2094947 ,  9.43848935],
       [ 8.92898549, 10.34927984],
       [ 0.79890552, 16.37383273],
       [ 2.50284147,  0.0800645 ],
       [ 0.47797863,  5.10399908]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ground_truth_labels</span></div><div class='xr-var-dims'>(sample)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1 1 0 1 0 1 1 1 ... 1 1 1 1 1 0 1 1</div><input id='attrs-b8017dce-85e1-4264-b7e4-1e0623b23308' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b8017dce-85e1-4264-b7e4-1e0623b23308' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0d7567c9-ad30-443f-8e6e-9aefd723d2ec' class='xr-var-data-in' type='checkbox'><label for='data-0d7567c9-ad30-443f-8e6e-9aefd723d2ec' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1,
       1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
       1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1,
       1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
       0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>measurement</span></div><div class='xr-var-dims'>(sample, x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.915e+06 1.479e+06 ... 1.766 1.885</div><input id='attrs-88079dae-439e-4e87-b8c0-7f7def4430ee' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-88079dae-439e-4e87-b8c0-7f7def4430ee' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d1507070-4df1-4021-8655-9420696f77af' class='xr-var-data-in' type='checkbox'><label for='data-d1507070-4df1-4021-8655-9420696f77af' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[1.91473866e+06, 1.47945621e+06, 1.36028471e+06, ...,
        1.94187833e+00, 1.95975369e+00, 2.07151476e+00],
       [1.97716281e+06, 1.35648739e+06, 1.63877436e+06, ...,
        1.90008720e+00, 1.76008223e+00, 2.09466497e+00],
       [9.73830160e-01, 7.68956928e-01, 1.03891097e+00, ...,
        9.25128766e-01, 6.82586751e-01, 1.00886636e+00],
       ...,
       [1.42016873e+00, 8.73396019e-01, 1.23904051e+00, ...,
        1.14723090e+00, 1.27145347e+00, 9.40494323e-01],
       [1.96972776e+06, 1.80114117e+06, 1.63801728e+06, ...,
        2.53037078e+00, 1.96144836e+00, 2.37164783e+00],
       [2.34596686e+06, 1.77244286e+06, 1.36862577e+06, ...,
        2.05730051e+00, 1.76616880e+00, 1.88473841e+00]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>composition_grid</span></div><div class='xr-var-dims'>(grid, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.0 0.2041 ... 25.0 10.0 25.0</div><input id='attrs-30d1d9e7-4a53-468e-94ef-ba61b4600141' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-30d1d9e7-4a53-468e-94ef-ba61b4600141' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2819fe4d-02d5-4a3e-a88d-ca8c959d1b4b' class='xr-var-data-in' type='checkbox'><label for='data-2819fe4d-02d5-4a3e-a88d-ca8c959d1b4b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[ 0.        ,  0.        ],
       [ 0.20408163,  0.        ],
       [ 0.40816327,  0.        ],
       ...,
       [ 9.59183673, 25.        ],
       [ 9.79591837, 25.        ],
       [10.        , 25.        ]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>normalized_composition</span></div><div class='xr-var-dims'>(sample, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.57 0.05441 ... 0.0478 0.2042</div><input id='attrs-a78af650-27c7-4596-a3b2-35b4cd9d57e6' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a78af650-27c7-4596-a3b2-35b4cd9d57e6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b1c7eee7-db01-459c-a7e7-f71188a10f30' class='xr-var-data-in' type='checkbox'><label for='data-b1c7eee7-db01-459c-a7e7-f71188a10f30' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>description :</span></dt><dd>Data normalized to have range 0 -&gt; 1</dd><dt><span>name :</span></dt><dd>Standardize</dd><dt><span>input_variable :</span></dt><dd>composition</dd><dt><span>output_variable :</span></dt><dd>normalized_composition</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>dim :</span></dt><dd>sample</dd><dt><span>component_dim :</span></dt><dd>component</dd><dt><span>min_val :</span></dt><dd>{&#x27;A&#x27;: 0.0, &#x27;B&#x27;: 0.0}</dd><dt><span>max_val :</span></dt><dd>{&#x27;A&#x27;: 10.0, &#x27;B&#x27;: 25.0}</dd><dt><span>scale_variable :</span></dt><dd>None</dd></dl></div><div class='xr-var-data'><pre>array([[0.56999576, 0.05440701],
       [0.89378202, 0.64695366],
       [0.3779011 , 0.78781278],
       [0.9825356 , 0.28654046],
       [0.16037012, 0.94928719],
       [0.79099475, 0.58855406],
       [0.2174658 , 0.19018012],
       [0.93087565, 0.11452453],
       [0.27892679, 0.00196367],
       [0.50368155, 0.71226209],
       [0.11852969, 0.656343  ],
       [0.16521403, 0.79104271],
       [0.27317673, 0.00754016],
       [0.92231422, 0.2887113 ],
       [0.83356002, 0.20882985],
       [0.81071181, 0.89444805],
       [0.41026329, 0.24709323],
       [0.79409605, 0.43932029],
       [0.65823861, 0.6111219 ],
       [0.37802657, 0.82060143],
...
       [0.50825235, 0.21457642],
       [0.85077058, 0.10111441],
       [0.44632403, 0.27006877],
       [0.85252344, 0.26842349],
       [0.92321858, 0.8289078 ],
       [0.67555881, 0.40994221],
       [0.76753907, 0.06718201],
       [0.58397554, 0.42597894],
       [0.02247844, 0.73409473],
       [0.88307764, 0.42621662],
       [0.89844145, 0.00132886],
       [0.01175595, 0.47107972],
       [0.7901926 , 0.75787605],
       [0.74267923, 0.94897665],
       [0.87338296, 0.49097155],
       [0.22094947, 0.37753957],
       [0.89289855, 0.41397119],
       [0.07989055, 0.65495331],
       [0.25028415, 0.00320258],
       [0.04779786, 0.20415996]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>normalized_composition_grid</span></div><div class='xr-var-dims'>(grid, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.0 0.02041 0.0 ... 1.0 1.0 1.0</div><input id='attrs-ac9628fd-9e87-4bae-a0a7-977f89707185' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ac9628fd-9e87-4bae-a0a7-977f89707185' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ec577f1d-a4bc-4343-b3f7-616ee568afb4' class='xr-var-data-in' type='checkbox'><label for='data-ec577f1d-a4bc-4343-b3f7-616ee568afb4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>description :</span></dt><dd>Data normalized to have range 0 -&gt; 1</dd><dt><span>name :</span></dt><dd>Standardize</dd><dt><span>input_variable :</span></dt><dd>composition_grid</dd><dt><span>output_variable :</span></dt><dd>normalized_composition_grid</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>dim :</span></dt><dd>grid</dd><dt><span>component_dim :</span></dt><dd>component</dd><dt><span>min_val :</span></dt><dd>{&#x27;A&#x27;: 0.0, &#x27;B&#x27;: 0.0}</dd><dt><span>max_val :</span></dt><dd>{&#x27;A&#x27;: 10.0, &#x27;B&#x27;: 25.0}</dd><dt><span>scale_variable :</span></dt><dd>None</dd></dl></div><div class='xr-var-data'><pre>array([[0.        , 0.        ],
       [0.02040816, 0.        ],
       [0.04081633, 0.        ],
       ...,
       [0.95918367, 1.        ],
       [0.97959184, 1.        ],
       [1.        , 1.        ]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>derivative</span></div><div class='xr-var-dims'>(sample, log_x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-3.82 -3.825 ... -0.3897 -0.4063</div><input id='attrs-e73b4393-1719-4f02-bea6-2026661b2f49' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-e73b4393-1719-4f02-bea6-2026661b2f49' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1d469c68-98e6-41b1-bed4-499c67ff0328' class='xr-var-data-in' type='checkbox'><label for='data-1d469c68-98e6-41b1-bed4-499c67ff0328' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>description :</span></dt><dd>Savitsky-Golay filtered data</dd><dt><span>name :</span></dt><dd>SavgolFilter</dd><dt><span>input_variable :</span></dt><dd>measurement</dd><dt><span>output_variable :</span></dt><dd>derivative</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>dim :</span></dt><dd>x</dd><dt><span>npts :</span></dt><dd>250</dd><dt><span>xlo :</span></dt><dd>None</dd><dt><span>xhi :</span></dt><dd>None</dd><dt><span>xlo_isel :</span></dt><dd>None</dd><dt><span>xhi_isel :</span></dt><dd>None</dd><dt><span>pedestal :</span></dt><dd>None</dd><dt><span>derivative :</span></dt><dd>1</dd><dt><span>apply_log_scale :</span></dt><dd>True</dd><dt><span>polyorder :</span></dt><dd>2</dd><dt><span>window_length :</span></dt><dd>50</dd></dl></div><div class='xr-var-data'><pre>array([[-3.82019992, -3.82462256, -3.82904519, ..., -0.35145453,
        -0.36993018, -0.38840584],
       [-4.2626048 , -4.24893257, -4.23526033, ...,  0.01349491,
         0.01809932,  0.02270373],
       [ 0.50261177,  0.4760206 ,  0.44942943, ...,  0.12473091,
         0.13576784,  0.14680477],
       ...,
       [-0.24159282, -0.24193045, -0.24226809, ...,  0.52407629,
         0.54400047,  0.56392465],
       [-3.67922195, -3.69182355, -3.70442514, ...,  0.30180559,
         0.31353524,  0.32526489],
       [-3.96638732, -3.97110223, -3.97581713, ..., -0.37305086,
        -0.389679  , -0.40630713]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>similarity</span></div><div class='xr-var-dims'>(sample_i, sample_j)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.0 0.9974 0.9503 ... 0.9974 1.0</div><input id='attrs-898af195-36f0-47b1-bed6-3db830e16b3c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-898af195-36f0-47b1-bed6-3db830e16b3c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-47dbd40f-64d5-48fe-8162-b58c36b07b1a' class='xr-var-data-in' type='checkbox'><label for='data-47dbd40f-64d5-48fe-8162-b58c36b07b1a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>metric :</span></dt><dd>laplacian</dd><dt><span>gamma :</span></dt><dd>0.0001</dd><dt><span>name :</span></dt><dd>SimilarityMetric</dd><dt><span>input_variable :</span></dt><dd>derivative</dd><dt><span>output_variable :</span></dt><dd>similarity</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>sample_dim :</span></dt><dd>sample</dd><dt><span>constrain_same :</span></dt><dd>[]</dd><dt><span>constrain_different :</span></dt><dd>[]</dd></dl></div><div class='xr-var-data'><pre>array([[1.        , 0.99741833, 0.950302  , ..., 0.95081738, 0.99761626,
        0.99830741],
       [0.99741833, 1.        , 0.95025158, ..., 0.95041344, 0.99752619,
        0.99755674],
       [0.950302  , 0.95025158, 1.        , ..., 0.99504435, 0.9505596 ,
        0.95006123],
       ...,
       [0.95081738, 0.95041344, 0.99504435, ..., 1.        , 0.95158475,
        0.95047502],
       [0.99761626, 0.99752619, 0.9505596 , ..., 0.95158475, 1.        ,
        0.99740548],
       [0.99830741, 0.99755674, 0.95006123, ..., 0.95047502, 0.99740548,
        1.        ]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>labels</span></div><div class='xr-var-dims'>(sample)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1 1 0 1 0 1 1 1 ... 1 1 1 1 1 0 1 1</div><input id='attrs-8525c24a-ecda-4d39-bbe1-364537dfb68f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-8525c24a-ecda-4d39-bbe1-364537dfb68f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-52a8ac75-0d92-4905-a128-7dd429858a7f' class='xr-var-data-in' type='checkbox'><label for='data-52a8ac75-0d92-4905-a128-7dd429858a7f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>n_phases :</span></dt><dd>2</dd><dt><span>name :</span></dt><dd>SpectralClustering</dd><dt><span>input_variable :</span></dt><dd>similarity</dd><dt><span>output_variable :</span></dt><dd>labels</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>dim :</span></dt><dd>sample</dd><dt><span>use_silhouette :</span></dt><dd>False</dd></dl></div><div class='xr-var-data'><pre>array([1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1,
       1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
       1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1,
       1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
       0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>extrap_mean</span></div><div class='xr-var-dims'>(grid)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1 1 1 1 1 1 1 1 ... 1 1 1 1 1 1 1 1</div><input id='attrs-7872071c-9ecc-4fc9-ae2c-e663648dee05' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7872071c-9ecc-4fc9-ae2c-e663648dee05' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a769641f-958f-4f79-9469-c46322495394' class='xr-var-data-in' type='checkbox'><label for='data-a769641f-958f-4f79-9469-c46322495394' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>name :</span></dt><dd>GaussianProcessClassifier</dd><dt><span>input_variable :</span></dt><dd>[&#x27;normalized_composition&#x27;, &#x27;labels&#x27;, &#x27;normalized_composition_grid&#x27;]</dd><dt><span>output_variable :</span></dt><dd>[&#x27;extrap_mean&#x27;, &#x27;extrap_entropy&#x27;]</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>extrap</dd><dt><span>feature_input_variable :</span></dt><dd>normalized_composition</dd><dt><span>predictor_input_variable :</span></dt><dd>labels</dd><dt><span>grid_variable :</span></dt><dd>normalized_composition_grid</dd><dt><span>sample_dim :</span></dt><dd>sample</dd><dt><span>grid_dim :</span></dt><dd>grid</dd><dt><span>grid :</span></dt><dd>&lt;xarray.DataArray &#x27;normalized_composition_grid&#x27; (grid: 2500, component: 2)&gt; Size: 40kB
array([[0.        , 0.        ],
       [0.02040816, 0.        ],
       [0.04081633, 0.        ],
       ...,
       [0.95918367, 1.        ],
       [0.97959184, 1.        ],
       [1.        , 1.        ]])
Coordinates:
  * component  (component) &lt;U1 8B &#x27;A&#x27; &#x27;B&#x27;
Dimensions without coordinates: grid
Attributes:
    description:      Data normalized to have range 0 -&gt; 1
    name:             Standardize
    input_variable:   composition_grid
    output_variable:  normalized_composition_grid
    input_prefix:     None
    output_prefix:    None
    dim:              grid
    component_dim:    component
    min_val:          {&#x27;A&#x27;: 0.0, &#x27;B&#x27;: 0.0}
    max_val:          {&#x27;A&#x27;: 10.0, &#x27;B&#x27;: 25.0}
    scale_variable:   None</dd><dt><span>optimizer :</span></dt><dd>fmin_l_bfgs_b</dd></dl></div><div class='xr-var-data'><pre>array([1, 1, 1, ..., 1, 1, 1])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>extrap_entropy</span></div><div class='xr-var-dims'>(grid)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.5813 0.5687 ... 0.4565 0.4603</div><input id='attrs-000a3058-b6f3-465d-8124-b70ffee1c2fa' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-000a3058-b6f3-465d-8124-b70ffee1c2fa' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-98f0d1bd-79df-4117-8a0f-942fd306fb96' class='xr-var-data-in' type='checkbox'><label for='data-98f0d1bd-79df-4117-8a0f-942fd306fb96' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>name :</span></dt><dd>GaussianProcessClassifier</dd><dt><span>input_variable :</span></dt><dd>[&#x27;normalized_composition&#x27;, &#x27;labels&#x27;, &#x27;normalized_composition_grid&#x27;]</dd><dt><span>output_variable :</span></dt><dd>[&#x27;extrap_mean&#x27;, &#x27;extrap_entropy&#x27;]</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>extrap</dd><dt><span>feature_input_variable :</span></dt><dd>normalized_composition</dd><dt><span>predictor_input_variable :</span></dt><dd>labels</dd><dt><span>grid_variable :</span></dt><dd>normalized_composition_grid</dd><dt><span>sample_dim :</span></dt><dd>sample</dd><dt><span>grid_dim :</span></dt><dd>grid</dd><dt><span>grid :</span></dt><dd>&lt;xarray.DataArray &#x27;normalized_composition_grid&#x27; (grid: 2500, component: 2)&gt; Size: 40kB
array([[0.        , 0.        ],
       [0.02040816, 0.        ],
       [0.04081633, 0.        ],
       ...,
       [0.95918367, 1.        ],
       [0.97959184, 1.        ],
       [1.        , 1.        ]])
Coordinates:
  * component  (component) &lt;U1 8B &#x27;A&#x27; &#x27;B&#x27;
Dimensions without coordinates: grid
Attributes:
    description:      Data normalized to have range 0 -&gt; 1
    name:             Standardize
    input_variable:   composition_grid
    output_variable:  normalized_composition_grid
    input_prefix:     None
    output_prefix:    None
    dim:              grid
    component_dim:    component
    min_val:          {&#x27;A&#x27;: 0.0, &#x27;B&#x27;: 0.0}
    max_val:          {&#x27;A&#x27;: 10.0, &#x27;B&#x27;: 25.0}
    scale_variable:   None</dd><dt><span>optimizer :</span></dt><dd>fmin_l_bfgs_b</dd></dl></div><div class='xr-var-data'><pre>array([0.58125708, 0.56865533, 0.55554833, ..., 0.45390195, 0.45652977,
       0.46031056])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>extrap_y_prob</span></div><div class='xr-var-dims'>(grid)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.5813 0.5687 ... 0.4565 0.4603</div><input id='attrs-f90527d1-1322-46a6-a1f8-8c3a17b5da5f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f90527d1-1322-46a6-a1f8-8c3a17b5da5f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ec337b24-ecc1-46c4-84cf-ef8d6c9f14f5' class='xr-var-data-in' type='checkbox'><label for='data-ec337b24-ecc1-46c4-84cf-ef8d6c9f14f5' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>name :</span></dt><dd>GaussianProcessClassifier</dd><dt><span>input_variable :</span></dt><dd>[&#x27;normalized_composition&#x27;, &#x27;labels&#x27;, &#x27;normalized_composition_grid&#x27;]</dd><dt><span>output_variable :</span></dt><dd>[&#x27;extrap_mean&#x27;, &#x27;extrap_entropy&#x27;]</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>extrap</dd><dt><span>feature_input_variable :</span></dt><dd>normalized_composition</dd><dt><span>predictor_input_variable :</span></dt><dd>labels</dd><dt><span>grid_variable :</span></dt><dd>normalized_composition_grid</dd><dt><span>sample_dim :</span></dt><dd>sample</dd><dt><span>grid_dim :</span></dt><dd>grid</dd><dt><span>grid :</span></dt><dd>&lt;xarray.DataArray &#x27;normalized_composition_grid&#x27; (grid: 2500, component: 2)&gt; Size: 40kB
array([[0.        , 0.        ],
       [0.02040816, 0.        ],
       [0.04081633, 0.        ],
       ...,
       [0.95918367, 1.        ],
       [0.97959184, 1.        ],
       [1.        , 1.        ]])
Coordinates:
  * component  (component) &lt;U1 8B &#x27;A&#x27; &#x27;B&#x27;
Dimensions without coordinates: grid
Attributes:
    description:      Data normalized to have range 0 -&gt; 1
    name:             Standardize
    input_variable:   composition_grid
    output_variable:  normalized_composition_grid
    input_prefix:     None
    output_prefix:    None
    dim:              grid
    component_dim:    component
    min_val:          {&#x27;A&#x27;: 0.0, &#x27;B&#x27;: 0.0}
    max_val:          {&#x27;A&#x27;: 10.0, &#x27;B&#x27;: 25.0}
    scale_variable:   None</dd><dt><span>optimizer :</span></dt><dd>fmin_l_bfgs_b</dd></dl></div><div class='xr-var-data'><pre>array([0.58125708, 0.56865533, 0.55554833, ..., 0.45390195, 0.45652977,
       0.46031056])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-c01fa6c2-0e6e-4755-9d5b-3b4c661bc51a' class='xr-section-summary-in' type='checkbox'  ><label for='section-c01fa6c2-0e6e-4755-9d5b-3b4c661bc51a' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>component</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-4aeb7a37-80fc-4d3d-835d-e37bbb5cc712' class='xr-index-data-in' type='checkbox'/><label for='index-4aeb7a37-80fc-4d3d-835d-e37bbb5cc712' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;A&#x27;, &#x27;B&#x27;], dtype=&#x27;object&#x27;, name=&#x27;component&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-41523970-6171-49ad-9846-f247129a7f79' class='xr-index-data-in' type='checkbox'/><label for='index-41523970-6171-49ad-9846-f247129a7f79' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([                0.001, 0.0010474522360006332, 0.0010971561867027272,
       0.0011492187010036998, 0.0012037516980200685, 0.0012608724076806808,
        0.001320703622736631, 0.0013833739627296209,  0.001449018150486198,
       0.0015177773017322714,
       ...
          0.6588581861506815,    0.6901224802908528,    0.7228703350949566,
            0.75717214883374,    0.7931016603333051,    0.8307361074919352,
          0.8701563933188907,    0.9114472598521185,    0.9546974703287516,
                         1.0],
      dtype=&#x27;float64&#x27;, name=&#x27;x&#x27;, length=150))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>log_x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-ffc0beb1-80bb-41e8-8c7f-ad180ce1e2f0' class='xr-index-data-in' type='checkbox'/><label for='index-ffc0beb1-80bb-41e8-8c7f-ad180ce1e2f0' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([                 -3.0,   -2.9879518072289155,   -2.9759036144578315,
          -2.963855421686747,   -2.9518072289156625,   -2.9397590361445785,
          -2.927710843373494,   -2.9156626506024095,   -2.9036144578313254,
          -2.891566265060241,
       ...
        -0.10843373493975905,  -0.09638554216867457,  -0.08433734939759008,
        -0.07228915662650603,  -0.06024096385542155,  -0.04819277108433706,
        -0.03614457831325302,  -0.02409638554216853, -0.012048192771084043,
                         0.0],
      dtype=&#x27;float64&#x27;, name=&#x27;log_x&#x27;, length=250))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-e2320c2d-5659-4afc-bbe5-063e1bfd064f' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-e2320c2d-5659-4afc-bbe5-063e1bfd064f' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<p>From this calculation, we get two new data variables: <code class="docutils literal notranslate"><span class="pre">extrap_y_entropy</span></code> and <code class="docutils literal notranslate"><span class="pre">extrap_mean</span></code>. These represent the most likely phase label and the entropy of this assignment.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span><span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mf">3.25</span><span class="p">))</span>

<span class="n">plot_surface_mpl</span><span class="p">(</span><span class="n">ds_result</span><span class="p">,</span><span class="s1">&#39;composition_grid&#39;</span><span class="p">,</span><span class="n">component_dim</span><span class="o">=</span><span class="s1">&#39;component&#39;</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="s1">&#39;extrap_mean&#39;</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">plot_surface_mpl</span><span class="p">(</span><span class="n">ds_result</span><span class="p">,</span><span class="s1">&#39;composition_grid&#39;</span><span class="p">,</span><span class="n">component_dim</span><span class="o">=</span><span class="s1">&#39;component&#39;</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="s1">&#39;extrap_entropy&#39;</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Most Likely Phase Label&quot;</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Entropy of Phase Label&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[Text(0.5, 1.0, &#39;Entropy of Phase Label&#39;)]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_building_pipelines_51_1.png" src="../_images/tutorials_building_pipelines_51_1.png" />
</div>
</div>
<p>The right subplot is related to our confidence in the label prediction and is a powerful tool for finding label boundaries because, by construction, it is maximized at label boundaries.</p>
</section>
<section id="Step-5:-Calculate-Next-Sample">
<h2>Step 5: Calculate Next Sample<a class="headerlink" href="#Step-5:-Calculate-Next-Sample" title="Permalink to this heading">#</a></h2>
<p>Now that we have a model that can predict phase labels and their uncertainty, we can use this information to select the next sample point. The <code class="docutils literal notranslate"><span class="pre">MaxValueAF</span></code> pipeline operation will select the composition with maximum entropy as the next point to measure, since high entropy indicates regions where the model is most uncertain about the phase label.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">my_first_pipeline</span><span class="p">:</span>
    <span class="n">MaxValueAF</span><span class="p">(</span>
        <span class="n">input_variables</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;extrap_entropy&#39;</span><span class="p">],</span>
        <span class="n">output_variable</span><span class="o">=</span><span class="s1">&#39;next_sample&#39;</span><span class="p">,</span>
        <span class="n">grid_variable</span><span class="o">=</span><span class="s1">&#39;composition_grid&#39;</span><span class="p">,</span>
    <span class="p">)</span>

<span class="n">my_first_pipeline</span><span class="o">.</span><span class="n">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PipelineOp                               input_variable ---&gt; output_variable
----------                               -----------------------------------
0  ) &lt;Standardize&gt;                       composition ---&gt; normalized_composition
1  ) &lt;Standardize&gt;                       composition_grid ---&gt; normalized_composition_grid
2  ) &lt;SavgolFilter&gt;                      measurement ---&gt; derivative
3  ) &lt;SimilarityMetric&gt;                  derivative ---&gt; similarity
4  ) &lt;SpectralClustering&gt;                similarity ---&gt; labels
5  ) &lt;GaussianProcessClassifier&gt;         [&#39;normalized_composition&#39;, &#39;labels&#39;, &#39;normalized_composition_grid&#39;] ---&gt; [&#39;extrap_mean&#39;, &#39;extrap_entropy&#39;]
6  ) &lt;MaxValueAF&gt;                        [&#39;extrap_entropy&#39;, &#39;composition_grid&#39;] ---&gt; next_sample

Input Variables
---------------
0) composition
1) composition_grid
2) measurement

Output Variables
----------------
0) extrap_mean
1) next_sample
</pre></div></div>
</div>
<p>Let’s run the pipeline</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_result</span> <span class="o">=</span> <span class="n">my_first_pipeline</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
<span class="n">ds_result</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "085eea8cbbbb4104a87fe6de9926459e", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1f1f1f;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
  height: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "►";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "▼";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 568kB
Dimensions:                      (sample: 100, component: 2, x: 150,
                                  grid: 2500, log_x: 250, sample_i: 100,
                                  sample_j: 100, AF_sample: 1)
Coordinates:
  * component                    (component) &lt;U1 8B &#x27;A&#x27; &#x27;B&#x27;
  * x                            (x) float64 1kB 0.001 0.001047 ... 0.9547 1.0
  * log_x                        (log_x) float64 2kB -3.0 -2.988 ... 0.0
Dimensions without coordinates: sample, grid, sample_i, sample_j, AF_sample
Data variables: (12/14)
    composition                  (sample, component) float64 2kB 5.7 ... 5.104
    ground_truth_labels          (sample) int64 800B 1 1 0 1 0 1 ... 1 1 1 0 1 1
    measurement                  (sample, x) float64 120kB 1.915e+06 ... 1.885
    composition_grid             (grid, component) float64 40kB 0.0 0.0 ... 25.0
    normalized_composition       (sample, component) float64 2kB 0.57 ... 0.2042
    normalized_composition_grid  (grid, component) float64 40kB 0.0 0.0 ... 1.0
    ...                           ...
    labels                       (sample) int64 800B 1 1 0 1 0 1 ... 1 1 1 0 1 1
    extrap_mean                  (grid) int64 20kB 1 1 1 1 1 1 1 ... 1 1 1 1 1 1
    extrap_entropy               (grid) float64 20kB 0.5813 0.5687 ... 0.4603
    extrap_y_prob                (grid) float64 20kB 0.5813 0.5687 ... 0.4603
    decision_surface             (grid) float64 20kB 0.7655 0.7391 ... 0.512
    next_sample                  (AF_sample, component) float64 16B 4.082 24.49</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-0ba901df-bbd5-409e-90fc-15f419409b30' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-0ba901df-bbd5-409e-90fc-15f419409b30' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span>sample</span>: 100</li><li><span class='xr-has-index'>component</span>: 2</li><li><span class='xr-has-index'>x</span>: 150</li><li><span>grid</span>: 2500</li><li><span class='xr-has-index'>log_x</span>: 250</li><li><span>sample_i</span>: 100</li><li><span>sample_j</span>: 100</li><li><span>AF_sample</span>: 1</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-e2986e13-f386-46cb-984a-0163ae1ed977' class='xr-section-summary-in' type='checkbox'  checked><label for='section-e2986e13-f386-46cb-984a-0163ae1ed977' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>component</span></div><div class='xr-var-dims'>(component)</div><div class='xr-var-dtype'>&lt;U1</div><div class='xr-var-preview xr-preview'>&#x27;A&#x27; &#x27;B&#x27;</div><input id='attrs-ca42c254-0083-4ab3-83f6-b217cbde8518' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-ca42c254-0083-4ab3-83f6-b217cbde8518' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4c36b3a2-121b-4ed3-9c8f-e4caa830faf0' class='xr-var-data-in' type='checkbox'><label for='data-4c36b3a2-121b-4ed3-9c8f-e4caa830faf0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;A&#x27;, &#x27;B&#x27;], dtype=&#x27;&lt;U1&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>x</span></div><div class='xr-var-dims'>(x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.001 0.001047 ... 0.9547 1.0</div><input id='attrs-9c3bcd15-6884-45f2-893c-7f5b375d5046' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-9c3bcd15-6884-45f2-893c-7f5b375d5046' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-66fed740-6543-4659-bdae-9e4de370161f' class='xr-var-data-in' type='checkbox'><label for='data-66fed740-6543-4659-bdae-9e4de370161f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([0.001   , 0.001047, 0.001097, 0.001149, 0.001204, 0.001261, 0.001321,
       0.001383, 0.001449, 0.001518, 0.00159 , 0.001665, 0.001744, 0.001827,
       0.001914, 0.002005, 0.0021  , 0.002199, 0.002304, 0.002413, 0.002527,
       0.002647, 0.002773, 0.002905, 0.003042, 0.003187, 0.003338, 0.003496,
       0.003662, 0.003836, 0.004018, 0.004209, 0.004409, 0.004618, 0.004837,
       0.005066, 0.005307, 0.005559, 0.005822, 0.006099, 0.006388, 0.006691,
       0.007009, 0.007341, 0.00769 , 0.008055, 0.008437, 0.008837, 0.009256,
       0.009696, 0.010156, 0.010638, 0.011142, 0.011671, 0.012225, 0.012805,
       0.013413, 0.014049, 0.014716, 0.015414, 0.016146, 0.016912, 0.017714,
       0.018555, 0.019435, 0.020358, 0.021324, 0.022335, 0.023395, 0.024505,
       0.025668, 0.026886, 0.028162, 0.029498, 0.030898, 0.032364, 0.0339  ,
       0.035509, 0.037194, 0.038959, 0.040807, 0.042744, 0.044772, 0.046897,
       0.049122, 0.051453, 0.053894, 0.056452, 0.059131, 0.061936, 0.064875,
       0.067954, 0.071179, 0.074556, 0.078094, 0.0818  , 0.085681, 0.089747,
       0.094006, 0.098467, 0.103139, 0.108033, 0.11316 , 0.118529, 0.124154,
       0.130045, 0.136216, 0.14268 , 0.14945 , 0.156542, 0.16397 , 0.171751,
       0.179901, 0.188438, 0.197379, 0.206746, 0.216556, 0.226832, 0.237596,
       0.24887 , 0.26068 , 0.27305 , 0.286006, 0.299578, 0.313794, 0.328684,
       0.344281, 0.360618, 0.37773 , 0.395654, 0.414429, 0.434094, 0.454693,
       0.476269, 0.498869, 0.522542, 0.547337, 0.57331 , 0.600514, 0.62901 ,
       0.658858, 0.690122, 0.72287 , 0.757172, 0.793102, 0.830736, 0.870156,
       0.911447, 0.954697, 1.      ])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>log_x</span></div><div class='xr-var-dims'>(log_x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-3.0 -2.988 -2.976 ... -0.01205 0.0</div><input id='attrs-c0e22672-8237-49f4-81e8-c0f06a9c63ab' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-c0e22672-8237-49f4-81e8-c0f06a9c63ab' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2a30394b-32fc-4f1c-b180-2829b91c5364' class='xr-var-data-in' type='checkbox'><label for='data-2a30394b-32fc-4f1c-b180-2829b91c5364' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([-3.      , -2.987952, -2.975904, ..., -0.024096, -0.012048,  0.      ])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-aa1d442a-46fd-4044-b262-bbe3d3a04f18' class='xr-section-summary-in' type='checkbox'  checked><label for='section-aa1d442a-46fd-4044-b262-bbe3d3a04f18' class='xr-section-summary' >Data variables: <span>(14)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>composition</span></div><div class='xr-var-dims'>(sample, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>5.7 1.36 8.938 ... 0.478 5.104</div><input id='attrs-daeacde7-0ccc-4065-a197-4296242e2836' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-daeacde7-0ccc-4065-a197-4296242e2836' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a5c57a89-c3f5-4775-bc40-b0907d341a5f' class='xr-var-data-in' type='checkbox'><label for='data-a5c57a89-c3f5-4775-bc40-b0907d341a5f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[ 5.69995762,  1.36017531],
       [ 8.93782024, 16.17384162],
       [ 3.77901101, 19.69531938],
       [ 9.82535598,  7.16351158],
       [ 1.60370118, 23.73217969],
       [ 7.90994751, 14.71385158],
       [ 2.17465804,  4.75450299],
       [ 9.30875652,  2.86311327],
       [ 2.78926787,  0.04909185],
       [ 5.0368155 , 17.80655234],
       [ 1.18529693, 16.40857492],
       [ 1.65214034, 19.7760677 ],
       [ 2.73176727,  0.18850408],
       [ 9.22314222,  7.21778243],
       [ 8.33560023,  5.22074632],
       [ 8.10711809, 22.36120136],
       [ 4.10263293,  6.17733076],
       [ 7.94096049, 10.98300725],
       [ 6.58238609, 15.27804755],
       [ 3.78026574, 20.5150357 ],
...
       [ 5.0825235 ,  5.36441059],
       [ 8.50770583,  2.52786027],
       [ 4.46324027,  6.75171924],
       [ 8.52523439,  6.71058719],
       [ 9.23218578, 20.72269505],
       [ 6.7555881 , 10.24855529],
       [ 7.67539066,  1.6795503 ],
       [ 5.8397554 , 10.64947346],
       [ 0.22478436, 18.35236821],
       [ 8.83077635, 10.65541542],
       [ 8.98441453,  0.03322162],
       [ 0.11755953, 11.77699299],
       [ 7.90192605, 18.94690136],
       [ 7.42679234, 23.72441631],
       [ 8.7338296 , 12.27428886],
       [ 2.2094947 ,  9.43848935],
       [ 8.92898549, 10.34927984],
       [ 0.79890552, 16.37383273],
       [ 2.50284147,  0.0800645 ],
       [ 0.47797863,  5.10399908]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>ground_truth_labels</span></div><div class='xr-var-dims'>(sample)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1 1 0 1 0 1 1 1 ... 1 1 1 1 1 0 1 1</div><input id='attrs-a6a617b6-69ec-4a51-af52-2697bb5aa11a' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-a6a617b6-69ec-4a51-af52-2697bb5aa11a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4611e294-a3da-4051-a59e-b129d773ae48' class='xr-var-data-in' type='checkbox'><label for='data-4611e294-a3da-4051-a59e-b129d773ae48' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1,
       1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
       1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1,
       1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
       0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>measurement</span></div><div class='xr-var-dims'>(sample, x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.915e+06 1.479e+06 ... 1.766 1.885</div><input id='attrs-cd749136-644e-4526-963b-74bde75c4ce9' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-cd749136-644e-4526-963b-74bde75c4ce9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-89e7f99f-4b69-4b01-972b-b22bb21c70e0' class='xr-var-data-in' type='checkbox'><label for='data-89e7f99f-4b69-4b01-972b-b22bb21c70e0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[1.91473866e+06, 1.47945621e+06, 1.36028471e+06, ...,
        1.94187833e+00, 1.95975369e+00, 2.07151476e+00],
       [1.97716281e+06, 1.35648739e+06, 1.63877436e+06, ...,
        1.90008720e+00, 1.76008223e+00, 2.09466497e+00],
       [9.73830160e-01, 7.68956928e-01, 1.03891097e+00, ...,
        9.25128766e-01, 6.82586751e-01, 1.00886636e+00],
       ...,
       [1.42016873e+00, 8.73396019e-01, 1.23904051e+00, ...,
        1.14723090e+00, 1.27145347e+00, 9.40494323e-01],
       [1.96972776e+06, 1.80114117e+06, 1.63801728e+06, ...,
        2.53037078e+00, 1.96144836e+00, 2.37164783e+00],
       [2.34596686e+06, 1.77244286e+06, 1.36862577e+06, ...,
        2.05730051e+00, 1.76616880e+00, 1.88473841e+00]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>composition_grid</span></div><div class='xr-var-dims'>(grid, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.0 0.2041 ... 25.0 10.0 25.0</div><input id='attrs-e05f086a-a870-4bd4-a8ca-c4c707d3f11e' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-e05f086a-a870-4bd4-a8ca-c4c707d3f11e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-029e62e2-9008-4ad6-ba55-d90893ca157a' class='xr-var-data-in' type='checkbox'><label for='data-029e62e2-9008-4ad6-ba55-d90893ca157a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[ 0.        ,  0.        ],
       [ 0.20408163,  0.        ],
       [ 0.40816327,  0.        ],
       ...,
       [ 9.59183673, 25.        ],
       [ 9.79591837, 25.        ],
       [10.        , 25.        ]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>normalized_composition</span></div><div class='xr-var-dims'>(sample, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.57 0.05441 ... 0.0478 0.2042</div><input id='attrs-b72db5a4-61c0-4b4a-a4b1-953096f644aa' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b72db5a4-61c0-4b4a-a4b1-953096f644aa' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-dee2be12-2002-4887-a34c-fd654aa241d5' class='xr-var-data-in' type='checkbox'><label for='data-dee2be12-2002-4887-a34c-fd654aa241d5' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>description :</span></dt><dd>Data normalized to have range 0 -&gt; 1</dd><dt><span>name :</span></dt><dd>Standardize</dd><dt><span>input_variable :</span></dt><dd>composition</dd><dt><span>output_variable :</span></dt><dd>normalized_composition</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>dim :</span></dt><dd>sample</dd><dt><span>component_dim :</span></dt><dd>component</dd><dt><span>min_val :</span></dt><dd>{&#x27;A&#x27;: 0.0, &#x27;B&#x27;: 0.0}</dd><dt><span>max_val :</span></dt><dd>{&#x27;A&#x27;: 10.0, &#x27;B&#x27;: 25.0}</dd><dt><span>scale_variable :</span></dt><dd>None</dd></dl></div><div class='xr-var-data'><pre>array([[0.56999576, 0.05440701],
       [0.89378202, 0.64695366],
       [0.3779011 , 0.78781278],
       [0.9825356 , 0.28654046],
       [0.16037012, 0.94928719],
       [0.79099475, 0.58855406],
       [0.2174658 , 0.19018012],
       [0.93087565, 0.11452453],
       [0.27892679, 0.00196367],
       [0.50368155, 0.71226209],
       [0.11852969, 0.656343  ],
       [0.16521403, 0.79104271],
       [0.27317673, 0.00754016],
       [0.92231422, 0.2887113 ],
       [0.83356002, 0.20882985],
       [0.81071181, 0.89444805],
       [0.41026329, 0.24709323],
       [0.79409605, 0.43932029],
       [0.65823861, 0.6111219 ],
       [0.37802657, 0.82060143],
...
       [0.50825235, 0.21457642],
       [0.85077058, 0.10111441],
       [0.44632403, 0.27006877],
       [0.85252344, 0.26842349],
       [0.92321858, 0.8289078 ],
       [0.67555881, 0.40994221],
       [0.76753907, 0.06718201],
       [0.58397554, 0.42597894],
       [0.02247844, 0.73409473],
       [0.88307764, 0.42621662],
       [0.89844145, 0.00132886],
       [0.01175595, 0.47107972],
       [0.7901926 , 0.75787605],
       [0.74267923, 0.94897665],
       [0.87338296, 0.49097155],
       [0.22094947, 0.37753957],
       [0.89289855, 0.41397119],
       [0.07989055, 0.65495331],
       [0.25028415, 0.00320258],
       [0.04779786, 0.20415996]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>normalized_composition_grid</span></div><div class='xr-var-dims'>(grid, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 0.0 0.02041 0.0 ... 1.0 1.0 1.0</div><input id='attrs-f4b6226c-0373-4c0c-9b40-2d2efe3bf873' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f4b6226c-0373-4c0c-9b40-2d2efe3bf873' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-49e192a3-9b8c-452f-b8ce-9636c6bddc33' class='xr-var-data-in' type='checkbox'><label for='data-49e192a3-9b8c-452f-b8ce-9636c6bddc33' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>description :</span></dt><dd>Data normalized to have range 0 -&gt; 1</dd><dt><span>name :</span></dt><dd>Standardize</dd><dt><span>input_variable :</span></dt><dd>composition_grid</dd><dt><span>output_variable :</span></dt><dd>normalized_composition_grid</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>dim :</span></dt><dd>grid</dd><dt><span>component_dim :</span></dt><dd>component</dd><dt><span>min_val :</span></dt><dd>{&#x27;A&#x27;: 0.0, &#x27;B&#x27;: 0.0}</dd><dt><span>max_val :</span></dt><dd>{&#x27;A&#x27;: 10.0, &#x27;B&#x27;: 25.0}</dd><dt><span>scale_variable :</span></dt><dd>None</dd></dl></div><div class='xr-var-data'><pre>array([[0.        , 0.        ],
       [0.02040816, 0.        ],
       [0.04081633, 0.        ],
       ...,
       [0.95918367, 1.        ],
       [0.97959184, 1.        ],
       [1.        , 1.        ]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>derivative</span></div><div class='xr-var-dims'>(sample, log_x)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-3.82 -3.825 ... -0.3897 -0.4063</div><input id='attrs-fa89ee4a-c450-426c-a84d-a0a1a84c9ca2' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-fa89ee4a-c450-426c-a84d-a0a1a84c9ca2' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4af94ada-7d31-4187-b89c-c66628849262' class='xr-var-data-in' type='checkbox'><label for='data-4af94ada-7d31-4187-b89c-c66628849262' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>description :</span></dt><dd>Savitsky-Golay filtered data</dd><dt><span>name :</span></dt><dd>SavgolFilter</dd><dt><span>input_variable :</span></dt><dd>measurement</dd><dt><span>output_variable :</span></dt><dd>derivative</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>dim :</span></dt><dd>x</dd><dt><span>npts :</span></dt><dd>250</dd><dt><span>xlo :</span></dt><dd>None</dd><dt><span>xhi :</span></dt><dd>None</dd><dt><span>xlo_isel :</span></dt><dd>None</dd><dt><span>xhi_isel :</span></dt><dd>None</dd><dt><span>pedestal :</span></dt><dd>None</dd><dt><span>derivative :</span></dt><dd>1</dd><dt><span>apply_log_scale :</span></dt><dd>True</dd><dt><span>polyorder :</span></dt><dd>2</dd><dt><span>window_length :</span></dt><dd>50</dd></dl></div><div class='xr-var-data'><pre>array([[-3.82019992, -3.82462256, -3.82904519, ..., -0.35145453,
        -0.36993018, -0.38840584],
       [-4.2626048 , -4.24893257, -4.23526033, ...,  0.01349491,
         0.01809932,  0.02270373],
       [ 0.50261177,  0.4760206 ,  0.44942943, ...,  0.12473091,
         0.13576784,  0.14680477],
       ...,
       [-0.24159282, -0.24193045, -0.24226809, ...,  0.52407629,
         0.54400047,  0.56392465],
       [-3.67922195, -3.69182355, -3.70442514, ...,  0.30180559,
         0.31353524,  0.32526489],
       [-3.96638732, -3.97110223, -3.97581713, ..., -0.37305086,
        -0.389679  , -0.40630713]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>similarity</span></div><div class='xr-var-dims'>(sample_i, sample_j)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.0 0.9974 0.9503 ... 0.9974 1.0</div><input id='attrs-c0563aad-6635-40a4-bfa0-fe610cf02e29' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c0563aad-6635-40a4-bfa0-fe610cf02e29' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c4f24c98-6e14-4fbc-bfba-6012812e2d75' class='xr-var-data-in' type='checkbox'><label for='data-c4f24c98-6e14-4fbc-bfba-6012812e2d75' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>metric :</span></dt><dd>laplacian</dd><dt><span>gamma :</span></dt><dd>0.0001</dd><dt><span>name :</span></dt><dd>SimilarityMetric</dd><dt><span>input_variable :</span></dt><dd>derivative</dd><dt><span>output_variable :</span></dt><dd>similarity</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>sample_dim :</span></dt><dd>sample</dd><dt><span>constrain_same :</span></dt><dd>[]</dd><dt><span>constrain_different :</span></dt><dd>[]</dd></dl></div><div class='xr-var-data'><pre>array([[1.        , 0.99741833, 0.950302  , ..., 0.95081738, 0.99761626,
        0.99830741],
       [0.99741833, 1.        , 0.95025158, ..., 0.95041344, 0.99752619,
        0.99755674],
       [0.950302  , 0.95025158, 1.        , ..., 0.99504435, 0.9505596 ,
        0.95006123],
       ...,
       [0.95081738, 0.95041344, 0.99504435, ..., 1.        , 0.95158475,
        0.95047502],
       [0.99761626, 0.99752619, 0.9505596 , ..., 0.95158475, 1.        ,
        0.99740548],
       [0.99830741, 0.99755674, 0.95006123, ..., 0.95047502, 0.99740548,
        1.        ]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>labels</span></div><div class='xr-var-dims'>(sample)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1 1 0 1 0 1 1 1 ... 1 1 1 1 1 0 1 1</div><input id='attrs-ad98a644-cb8d-4892-bf17-b691a3f60cdc' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ad98a644-cb8d-4892-bf17-b691a3f60cdc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-19ead5d5-4971-4d49-8c7e-dbc3b47bf91b' class='xr-var-data-in' type='checkbox'><label for='data-19ead5d5-4971-4d49-8c7e-dbc3b47bf91b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>n_phases :</span></dt><dd>2</dd><dt><span>name :</span></dt><dd>SpectralClustering</dd><dt><span>input_variable :</span></dt><dd>similarity</dd><dt><span>output_variable :</span></dt><dd>labels</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>dim :</span></dt><dd>sample</dd><dt><span>use_silhouette :</span></dt><dd>False</dd></dl></div><div class='xr-var-data'><pre>array([1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1,
       1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
       1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1,
       1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
       0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>extrap_mean</span></div><div class='xr-var-dims'>(grid)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1 1 1 1 1 1 1 1 ... 1 1 1 1 1 1 1 1</div><input id='attrs-ff650e0e-f728-4ed6-8d55-b3ea492638a8' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ff650e0e-f728-4ed6-8d55-b3ea492638a8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4533096e-44bd-49cc-83c2-b95213eaa600' class='xr-var-data-in' type='checkbox'><label for='data-4533096e-44bd-49cc-83c2-b95213eaa600' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>name :</span></dt><dd>GaussianProcessClassifier</dd><dt><span>input_variable :</span></dt><dd>[&#x27;normalized_composition&#x27;, &#x27;labels&#x27;, &#x27;normalized_composition_grid&#x27;]</dd><dt><span>output_variable :</span></dt><dd>[&#x27;extrap_mean&#x27;, &#x27;extrap_entropy&#x27;]</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>extrap</dd><dt><span>feature_input_variable :</span></dt><dd>normalized_composition</dd><dt><span>predictor_input_variable :</span></dt><dd>labels</dd><dt><span>grid_variable :</span></dt><dd>normalized_composition_grid</dd><dt><span>sample_dim :</span></dt><dd>sample</dd><dt><span>grid_dim :</span></dt><dd>grid</dd><dt><span>grid :</span></dt><dd>&lt;xarray.DataArray &#x27;normalized_composition_grid&#x27; (grid: 2500, component: 2)&gt; Size: 40kB
array([[0.        , 0.        ],
       [0.02040816, 0.        ],
       [0.04081633, 0.        ],
       ...,
       [0.95918367, 1.        ],
       [0.97959184, 1.        ],
       [1.        , 1.        ]])
Coordinates:
  * component  (component) &lt;U1 8B &#x27;A&#x27; &#x27;B&#x27;
Dimensions without coordinates: grid
Attributes:
    description:      Data normalized to have range 0 -&gt; 1
    name:             Standardize
    input_variable:   composition_grid
    output_variable:  normalized_composition_grid
    input_prefix:     None
    output_prefix:    None
    dim:              grid
    component_dim:    component
    min_val:          {&#x27;A&#x27;: 0.0, &#x27;B&#x27;: 0.0}
    max_val:          {&#x27;A&#x27;: 10.0, &#x27;B&#x27;: 25.0}
    scale_variable:   None</dd><dt><span>optimizer :</span></dt><dd>fmin_l_bfgs_b</dd></dl></div><div class='xr-var-data'><pre>array([1, 1, 1, ..., 1, 1, 1])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>extrap_entropy</span></div><div class='xr-var-dims'>(grid)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.5813 0.5687 ... 0.4565 0.4603</div><input id='attrs-f94257ca-3bf2-4992-a7fc-b7738b66eb98' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f94257ca-3bf2-4992-a7fc-b7738b66eb98' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-37dde48e-e61f-4922-aec2-4996f66ca09e' class='xr-var-data-in' type='checkbox'><label for='data-37dde48e-e61f-4922-aec2-4996f66ca09e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>name :</span></dt><dd>GaussianProcessClassifier</dd><dt><span>input_variable :</span></dt><dd>[&#x27;normalized_composition&#x27;, &#x27;labels&#x27;, &#x27;normalized_composition_grid&#x27;]</dd><dt><span>output_variable :</span></dt><dd>[&#x27;extrap_mean&#x27;, &#x27;extrap_entropy&#x27;]</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>extrap</dd><dt><span>feature_input_variable :</span></dt><dd>normalized_composition</dd><dt><span>predictor_input_variable :</span></dt><dd>labels</dd><dt><span>grid_variable :</span></dt><dd>normalized_composition_grid</dd><dt><span>sample_dim :</span></dt><dd>sample</dd><dt><span>grid_dim :</span></dt><dd>grid</dd><dt><span>grid :</span></dt><dd>&lt;xarray.DataArray &#x27;normalized_composition_grid&#x27; (grid: 2500, component: 2)&gt; Size: 40kB
array([[0.        , 0.        ],
       [0.02040816, 0.        ],
       [0.04081633, 0.        ],
       ...,
       [0.95918367, 1.        ],
       [0.97959184, 1.        ],
       [1.        , 1.        ]])
Coordinates:
  * component  (component) &lt;U1 8B &#x27;A&#x27; &#x27;B&#x27;
Dimensions without coordinates: grid
Attributes:
    description:      Data normalized to have range 0 -&gt; 1
    name:             Standardize
    input_variable:   composition_grid
    output_variable:  normalized_composition_grid
    input_prefix:     None
    output_prefix:    None
    dim:              grid
    component_dim:    component
    min_val:          {&#x27;A&#x27;: 0.0, &#x27;B&#x27;: 0.0}
    max_val:          {&#x27;A&#x27;: 10.0, &#x27;B&#x27;: 25.0}
    scale_variable:   None</dd><dt><span>optimizer :</span></dt><dd>fmin_l_bfgs_b</dd></dl></div><div class='xr-var-data'><pre>array([0.58125708, 0.56865533, 0.55554833, ..., 0.45390195, 0.45652977,
       0.46031056])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>extrap_y_prob</span></div><div class='xr-var-dims'>(grid)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.5813 0.5687 ... 0.4565 0.4603</div><input id='attrs-5427b008-7df9-4b03-b94b-b4c0dd07181c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-5427b008-7df9-4b03-b94b-b4c0dd07181c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a1302e9f-c171-4eee-813d-8fd2ddd8a166' class='xr-var-data-in' type='checkbox'><label for='data-a1302e9f-c171-4eee-813d-8fd2ddd8a166' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>name :</span></dt><dd>GaussianProcessClassifier</dd><dt><span>input_variable :</span></dt><dd>[&#x27;normalized_composition&#x27;, &#x27;labels&#x27;, &#x27;normalized_composition_grid&#x27;]</dd><dt><span>output_variable :</span></dt><dd>[&#x27;extrap_mean&#x27;, &#x27;extrap_entropy&#x27;]</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>extrap</dd><dt><span>feature_input_variable :</span></dt><dd>normalized_composition</dd><dt><span>predictor_input_variable :</span></dt><dd>labels</dd><dt><span>grid_variable :</span></dt><dd>normalized_composition_grid</dd><dt><span>sample_dim :</span></dt><dd>sample</dd><dt><span>grid_dim :</span></dt><dd>grid</dd><dt><span>grid :</span></dt><dd>&lt;xarray.DataArray &#x27;normalized_composition_grid&#x27; (grid: 2500, component: 2)&gt; Size: 40kB
array([[0.        , 0.        ],
       [0.02040816, 0.        ],
       [0.04081633, 0.        ],
       ...,
       [0.95918367, 1.        ],
       [0.97959184, 1.        ],
       [1.        , 1.        ]])
Coordinates:
  * component  (component) &lt;U1 8B &#x27;A&#x27; &#x27;B&#x27;
Dimensions without coordinates: grid
Attributes:
    description:      Data normalized to have range 0 -&gt; 1
    name:             Standardize
    input_variable:   composition_grid
    output_variable:  normalized_composition_grid
    input_prefix:     None
    output_prefix:    None
    dim:              grid
    component_dim:    component
    min_val:          {&#x27;A&#x27;: 0.0, &#x27;B&#x27;: 0.0}
    max_val:          {&#x27;A&#x27;: 10.0, &#x27;B&#x27;: 25.0}
    scale_variable:   None</dd><dt><span>optimizer :</span></dt><dd>fmin_l_bfgs_b</dd></dl></div><div class='xr-var-data'><pre>array([0.58125708, 0.56865533, 0.55554833, ..., 0.45390195, 0.45652977,
       0.46031056])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>decision_surface</span></div><div class='xr-var-dims'>(grid)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.7655 0.7391 ... 0.5041 0.512</div><input id='attrs-c2fb8ade-6364-49bd-ae71-1285a132bac8' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c2fb8ade-6364-49bd-ae71-1285a132bac8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f9b87b0a-6431-43fd-9013-27bd4dfc6304' class='xr-var-data-in' type='checkbox'><label for='data-f9b87b0a-6431-43fd-9013-27bd4dfc6304' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>description :</span></dt><dd>The final acquisition surface that is evaluated to determine the next_sample</dd><dt><span>name :</span></dt><dd>MaxValueAF</dd><dt><span>input_variable :</span></dt><dd>[&#x27;extrap_entropy&#x27;, &#x27;composition_grid&#x27;]</dd><dt><span>output_variable :</span></dt><dd>next_sample</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>input_variables :</span></dt><dd>[&#x27;extrap_entropy&#x27;]</dd><dt><span>excluded_comps_variables :</span></dt><dd>None</dd><dt><span>excluded_comps_dim :</span></dt><dd>None</dd><dt><span>count :</span></dt><dd>1</dd><dt><span>grid_variable :</span></dt><dd>composition_grid</dd><dt><span>grid_dim :</span></dt><dd>grid</dd><dt><span>decision_rtol :</span></dt><dd>0.05</dd><dt><span>exclusion_radius :</span></dt><dd>0.001</dd><dt><span>combine_coeffs :</span></dt><dd>None</dd><dt><span>acquisition :</span></dt><dd>&lt;xarray.Dataset&gt; Size: 60kB
Dimensions:           (component: 2, grid: 2500)
Coordinates:
  * component         (component) &lt;U1 8B &#x27;A&#x27; &#x27;B&#x27;
Dimensions without coordinates: grid
Data variables:
    comp_grid         (grid, component) float64 40kB 0.0 0.0 ... 10.0 25.0
    decision_surface  (grid) float64 20kB 0.7655 0.7391 0.7116 ... 0.5041 0.512</dd></dl></div><div class='xr-var-data'><pre>array([0.76549835, 0.73908732, 0.7116174 , ..., 0.49858474, 0.50409217,
       0.51201603])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>next_sample</span></div><div class='xr-var-dims'>(AF_sample, component)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>4.082 24.49</div><input id='attrs-033ffadb-e728-4749-b3d4-ec8e4acd21a3' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-033ffadb-e728-4749-b3d4-ec8e4acd21a3' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b20dcb21-cd5c-4c54-9672-a33339bd87ce' class='xr-var-data-in' type='checkbox'><label for='data-b20dcb21-cd5c-4c54-9672-a33339bd87ce' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>name :</span></dt><dd>MaxValueAF</dd><dt><span>input_variable :</span></dt><dd>[&#x27;extrap_entropy&#x27;, &#x27;composition_grid&#x27;]</dd><dt><span>output_variable :</span></dt><dd>next_sample</dd><dt><span>input_prefix :</span></dt><dd>None</dd><dt><span>output_prefix :</span></dt><dd>None</dd><dt><span>input_variables :</span></dt><dd>[&#x27;extrap_entropy&#x27;]</dd><dt><span>excluded_comps_variables :</span></dt><dd>None</dd><dt><span>excluded_comps_dim :</span></dt><dd>None</dd><dt><span>count :</span></dt><dd>1</dd><dt><span>grid_variable :</span></dt><dd>composition_grid</dd><dt><span>grid_dim :</span></dt><dd>grid</dd><dt><span>decision_rtol :</span></dt><dd>0.05</dd><dt><span>exclusion_radius :</span></dt><dd>0.001</dd><dt><span>combine_coeffs :</span></dt><dd>None</dd><dt><span>acquisition :</span></dt><dd>&lt;xarray.Dataset&gt; Size: 60kB
Dimensions:           (component: 2, grid: 2500)
Coordinates:
  * component         (component) &lt;U1 8B &#x27;A&#x27; &#x27;B&#x27;
Dimensions without coordinates: grid
Data variables:
    comp_grid         (grid, component) float64 40kB 0.0 0.0 ... 10.0 25.0
    decision_surface  (grid) float64 20kB 0.7655 0.7391 0.7116 ... 0.5041 0.512</dd></dl></div><div class='xr-var-data'><pre>array([[ 4.08163265, 24.48979592]])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-d9408d1a-476c-4744-ace7-ddb310e320e5' class='xr-section-summary-in' type='checkbox'  ><label for='section-d9408d1a-476c-4744-ace7-ddb310e320e5' class='xr-section-summary' >Indexes: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>component</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-f17accfe-69aa-4fe3-8099-967de13acadf' class='xr-index-data-in' type='checkbox'/><label for='index-f17accfe-69aa-4fe3-8099-967de13acadf' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([&#x27;A&#x27;, &#x27;B&#x27;], dtype=&#x27;object&#x27;, name=&#x27;component&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-e557654f-14f6-4b6c-a661-55732ff4f12b' class='xr-index-data-in' type='checkbox'/><label for='index-e557654f-14f6-4b6c-a661-55732ff4f12b' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([                0.001, 0.0010474522360006332, 0.0010971561867027272,
       0.0011492187010036998, 0.0012037516980200685, 0.0012608724076806808,
        0.001320703622736631, 0.0013833739627296209,  0.001449018150486198,
       0.0015177773017322714,
       ...
          0.6588581861506815,    0.6901224802908528,    0.7228703350949566,
            0.75717214883374,    0.7931016603333051,    0.8307361074919352,
          0.8701563933188907,    0.9114472598521185,    0.9546974703287516,
                         1.0],
      dtype=&#x27;float64&#x27;, name=&#x27;x&#x27;, length=150))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>log_x</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-1a961c88-631c-442c-a0b5-a716cc10d67d' class='xr-index-data-in' type='checkbox'/><label for='index-1a961c88-631c-442c-a0b5-a716cc10d67d' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([                 -3.0,   -2.9879518072289155,   -2.9759036144578315,
          -2.963855421686747,   -2.9518072289156625,   -2.9397590361445785,
          -2.927710843373494,   -2.9156626506024095,   -2.9036144578313254,
          -2.891566265060241,
       ...
        -0.10843373493975905,  -0.09638554216867457,  -0.08433734939759008,
        -0.07228915662650603,  -0.06024096385542155,  -0.04819277108433706,
        -0.03614457831325302,  -0.02409638554216853, -0.012048192771084043,
                         0.0],
      dtype=&#x27;float64&#x27;, name=&#x27;log_x&#x27;, length=250))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-fd90e86c-ddad-4c5f-bed8-3c92dbed5726' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-fd90e86c-ddad-4c5f-bed8-3c92dbed5726' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<p>Let’s plot the next composition on the mean and entropy plots:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span><span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mf">3.25</span><span class="p">))</span>

<span class="n">plot_surface_mpl</span><span class="p">(</span><span class="n">ds_result</span><span class="p">,</span><span class="s1">&#39;composition_grid&#39;</span><span class="p">,</span><span class="n">component_dim</span><span class="o">=</span><span class="s1">&#39;component&#39;</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="s1">&#39;extrap_mean&#39;</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">plot_surface_mpl</span><span class="p">(</span><span class="n">ds_result</span><span class="p">,</span><span class="s1">&#39;composition_grid&#39;</span><span class="p">,</span><span class="n">component_dim</span><span class="o">=</span><span class="s1">&#39;component&#39;</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="s1">&#39;extrap_entropy&#39;</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="n">plot_scatter_mpl</span><span class="p">(</span><span class="n">ds_result</span><span class="p">,</span><span class="s1">&#39;next_sample&#39;</span><span class="p">,</span><span class="n">component_dim</span><span class="o">=</span><span class="s1">&#39;component&#39;</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">marker</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span><span class="n">s</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">plot_scatter_mpl</span><span class="p">(</span><span class="n">ds_result</span><span class="p">,</span><span class="s1">&#39;next_sample&#39;</span><span class="p">,</span><span class="n">component_dim</span><span class="o">=</span><span class="s1">&#39;component&#39;</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">marker</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span><span class="n">s</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Most Likely Phase Label&quot;</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Entropy of Phase Label&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[Text(0.5, 1.0, &#39;Entropy of Phase Label&#39;)]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_building_pipelines_59_1.png" src="../_images/tutorials_building_pipelines_59_1.png" />
</div>
</div>
<p>See that the red X is placed near the boundary of the two phases. Running the pipeline several times, you should see the X move about the bright region of entropy. This is because the <code class="docutils literal notranslate"><span class="pre">MaxValueAF</span></code> acquisition function doesn’t choose the absolute maximum, but rather randomly chooses from the top <code class="docutils literal notranslate"><span class="pre">acquisition_rtol</span></code> percent of the entropy.</p>
</section>
<section id="Full-Pipeline">
<h2>Full Pipeline<a class="headerlink" href="#Full-Pipeline" title="Permalink to this heading">#</a></h2>
<p>With that, we have a full <code class="docutils literal notranslate"><span class="pre">Pipeline</span></code> which defines the behavior of a decision agent! Let’s view the whole pipeline defined in a single context:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Pipeline</span><span class="p">()</span> <span class="k">as</span> <span class="n">my_first_pipeline</span><span class="p">:</span>

    <span class="n">Standardize</span><span class="p">(</span>
        <span class="n">input_variable</span><span class="o">=</span><span class="s1">&#39;composition&#39;</span><span class="p">,</span>
        <span class="n">output_variable</span><span class="o">=</span><span class="s1">&#39;normalized_composition&#39;</span><span class="p">,</span>
        <span class="n">dim</span><span class="o">=</span><span class="s1">&#39;sample&#39;</span><span class="p">,</span>
        <span class="n">component_dim</span><span class="o">=</span><span class="s1">&#39;component&#39;</span><span class="p">,</span>
        <span class="n">min_val</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;A&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">},</span>
        <span class="n">max_val</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;A&#39;</span><span class="p">:</span><span class="mf">10.0</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">:</span><span class="mf">25.0</span><span class="p">},</span>
    <span class="p">)</span>

    <span class="n">Standardize</span><span class="p">(</span>
        <span class="n">input_variable</span><span class="o">=</span><span class="s1">&#39;composition_grid&#39;</span><span class="p">,</span>
        <span class="n">output_variable</span><span class="o">=</span><span class="s1">&#39;normalized_composition_grid&#39;</span><span class="p">,</span>
        <span class="n">dim</span><span class="o">=</span><span class="s1">&#39;grid&#39;</span><span class="p">,</span>
        <span class="n">component_dim</span><span class="o">=</span><span class="s1">&#39;component&#39;</span><span class="p">,</span>
        <span class="n">min_val</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;A&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">:</span><span class="mf">0.0</span><span class="p">},</span>
        <span class="n">max_val</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;A&#39;</span><span class="p">:</span><span class="mf">10.0</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">:</span><span class="mf">25.0</span><span class="p">},</span>
    <span class="p">)</span>

    <span class="n">SavgolFilter</span><span class="p">(</span>
        <span class="n">input_variable</span><span class="o">=</span><span class="s1">&#39;measurement&#39;</span><span class="p">,</span>
        <span class="n">output_variable</span><span class="o">=</span><span class="s1">&#39;derivative&#39;</span><span class="p">,</span>
        <span class="n">dim</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span>
        <span class="n">derivative</span><span class="o">=</span><span class="mi">1</span>
        <span class="p">)</span>

    <span class="n">Similarity</span><span class="p">(</span>
        <span class="n">input_variable</span><span class="o">=</span><span class="s1">&#39;derivative&#39;</span><span class="p">,</span>
        <span class="n">output_variable</span><span class="o">=</span><span class="s1">&#39;similarity&#39;</span><span class="p">,</span>
        <span class="n">sample_dim</span><span class="o">=</span><span class="s1">&#39;sample&#39;</span><span class="p">,</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;metric&#39;</span><span class="p">:</span> <span class="s1">&#39;laplacian&#39;</span><span class="p">,</span><span class="s1">&#39;gamma&#39;</span><span class="p">:</span><span class="mf">1e-4</span><span class="p">}</span>
        <span class="p">)</span>

    <span class="n">SpectralClustering</span><span class="p">(</span>
        <span class="n">input_variable</span><span class="o">=</span><span class="s1">&#39;similarity&#39;</span><span class="p">,</span>
        <span class="n">output_variable</span><span class="o">=</span><span class="s1">&#39;labels&#39;</span><span class="p">,</span>
        <span class="n">dim</span><span class="o">=</span><span class="s1">&#39;sample&#39;</span><span class="p">,</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;n_phases&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
        <span class="p">)</span>


    <span class="n">GaussianProcessClassifier</span><span class="p">(</span>
        <span class="n">feature_input_variable</span><span class="o">=</span><span class="s1">&#39;normalized_composition&#39;</span><span class="p">,</span>
        <span class="n">predictor_input_variable</span><span class="o">=</span><span class="s1">&#39;labels&#39;</span><span class="p">,</span>
        <span class="n">output_prefix</span><span class="o">=</span><span class="s1">&#39;extrap&#39;</span><span class="p">,</span>
        <span class="n">sample_dim</span><span class="o">=</span><span class="s1">&#39;sample&#39;</span><span class="p">,</span>
        <span class="n">grid_variable</span><span class="o">=</span><span class="s1">&#39;normalized_composition_grid&#39;</span><span class="p">,</span>
        <span class="n">grid_dim</span><span class="o">=</span><span class="s1">&#39;grid&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">MaxValueAF</span><span class="p">(</span>
        <span class="n">input_variables</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;extrap_entropy&#39;</span><span class="p">],</span>
        <span class="n">output_variable</span><span class="o">=</span><span class="s1">&#39;next_sample&#39;</span><span class="p">,</span>
        <span class="n">grid_variable</span><span class="o">=</span><span class="s1">&#39;composition_grid&#39;</span><span class="p">,</span>
    <span class="p">)</span>

<span class="n">my_first_pipeline</span><span class="o">.</span><span class="n">print</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
PipelineOp                               input_variable ---&gt; output_variable
----------                               -----------------------------------
0  ) &lt;Standardize&gt;                       composition ---&gt; normalized_composition
1  ) &lt;Standardize&gt;                       composition_grid ---&gt; normalized_composition_grid
2  ) &lt;SavgolFilter&gt;                      measurement ---&gt; derivative
3  ) &lt;SimilarityMetric&gt;                  derivative ---&gt; similarity
4  ) &lt;SpectralClustering&gt;                similarity ---&gt; labels
5  ) &lt;GaussianProcessClassifier&gt;         [&#39;normalized_composition&#39;, &#39;labels&#39;, &#39;normalized_composition_grid&#39;] ---&gt; [&#39;extrap_mean&#39;, &#39;extrap_entropy&#39;]
6  ) &lt;MaxValueAF&gt;                        [&#39;extrap_entropy&#39;, &#39;composition_grid&#39;] ---&gt; next_sample

Input Variables
---------------
0) composition
1) composition_grid
2) measurement

Output Variables
----------------
0) extrap_mean
1) next_sample
</pre></div></div>
</div>
<p>We can also visualize the full pipeline using the <code class="docutils literal notranslate"><span class="pre">.draw</span></code> and <code class="docutils literal notranslate"><span class="pre">.draw_plotly</span></code> methods</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_first_pipeline</span><span class="o">.</span><span class="n">draw</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_building_pipelines_65_0.png" src="../_images/tutorials_building_pipelines_65_0.png" />
</div>
</div>
<p>While this doesn’t always produce the more visually appealling graphs, it is a powerful way to check the consistency and flow of complex pipelines.</p>
</section>
<section id="Conclusion">
<h2>Conclusion<a class="headerlink" href="#Conclusion" title="Permalink to this heading">#</a></h2>
<p>In this tutorial, we learned how to build pipelines in using <code class="docutils literal notranslate"><span class="pre">AFL.double_agent</span></code> by:</p>
<ul class="simple">
<li><p>Creating a new pipeline using <code class="docutils literal notranslate"><span class="pre">Pipeline()</span></code></p></li>
<li><p>Adding data processing steps like normalization and derivative calculation</p></li>
<li><p>Implementing spectral clustering for phase identification</p></li>
<li><p>Using Gaussian Process classification to extrapolate phase boundaries</p></li>
<li><p>Adding active learning with acquisition functions to guide further sampling</p></li>
<li><p>Visualizing the pipeline structure and results at each step</p></li>
</ul>
<p>The pipeline we built demonstrates a complete workflow - from raw data processing through machine learning and active learning. This modular approach allows us to easily modify individual components while maintaining a clear data flow between steps.</p>
<p>For more examples of AFL pipelines and components, check out the other tutorials and examples in the documentation.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="quickstart.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Quickstart</p>
      </div>
    </a>
    <a class="right-next"
       href="interactive.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Interactive Tutorials</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Setup">Setup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Load-Input-Data">Load Input Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Step-1:-Composition-Preprocessing">Step 1: Composition Preprocessing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Step-2:-Savitsky-Golay-Filter">Step 2: Savitsky-Golay Filter</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Step-2:-Calculate-Similarity-between-Measurement-Data">Step 2: Calculate Similarity between Measurement Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Step-3:-Cluster-Measurement-Data-based-on-Similarity">Step 3: Cluster Measurement Data based on Similarity</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Step-4:-Extrapolate-Cluster-Labels">Step 4: Extrapolate Cluster Labels</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Step-5:-Calculate-Next-Sample">Step 5: Calculate Next Sample</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Full-Pipeline">Full Pipeline</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Conclusion">Conclusion</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/tutorials/building_pipelines.ipynb.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>


  
  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright : Official Contribution of the US Government.  Not subject to copyright in the United States.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.1.2.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>

  <!-- Taken from https://www.filamentgroup.com/lab/html-includes/#another-demo%3A-including-another-html-file -->
  <iframe src="../_static/ntd2d_menu.html" onload="this.before((this.contentDocument.body||this.contentDocument).children[0]);this.remove()"></iframe>
  </body>
</html>